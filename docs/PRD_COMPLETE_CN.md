# ä¹¦å£° - è‹±è¯­å¬åŠ›å­¦ä¹ å¹³å°

## å®Œæ•´äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)

**ç‰ˆæœ¬ï¼š** 2.0
**æœ€åæ›´æ–°ï¼š** 2026-01-18
**çŠ¶æ€ï¼š** ç”Ÿäº§å°±ç»ª
**æ–‡æ¡£ç±»å‹ï¼š** ç»¼åˆPRD

---

## ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#1é¡¹ç›®æ¦‚è¿°)
2. [ç”¨æˆ·è§’è‰²ä¸æƒé™](#2ç”¨æˆ·è§’è‰²ä¸æƒé™)
3. [åŠŸèƒ½éœ€æ±‚](#3åŠŸèƒ½éœ€æ±‚)
4. [æŠ€æœ¯æ¶æ„](#4æŠ€æœ¯æ¶æ„)
5. [æ•°æ®åº“è®¾è®¡](#5æ•°æ®åº“è®¾è®¡)
6. [APIè®¾è®¡](#6apiè®¾è®¡)
7. [UI/UXè®¾è®¡](#7uiuxè®¾è®¡)
8. [ä¸šåŠ¡è§„åˆ™](#8ä¸šåŠ¡è§„åˆ™)
9. [å®æ–½çŠ¶æ€](#9å®æ–½çŠ¶æ€)
10. [éåŠŸèƒ½éœ€æ±‚](#10éåŠŸèƒ½éœ€æ±‚)
11. [å®‰å…¨æ¶æ„](#11å®‰å…¨æ¶æ„)
12. [éƒ¨ç½²ä¸è¿ç»´](#12éƒ¨ç½²ä¸è¿ç»´)
13. [é£é™©ä¸ç¼“è§£æªæ–½](#13é£é™©ä¸ç¼“è§£æªæ–½)
14. [æœªæ¥è·¯çº¿å›¾](#14æœªæ¥è·¯çº¿å›¾)
15. [é™„å½•](#15é™„å½•)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 èƒŒæ™¯

ä¹¦å£°æ˜¯ä¸€ä¸ªé¢å‘K-12å­¦ç”Ÿï¼ˆ6-18å²ï¼‰çš„è‹±è¯­å¬åŠ›å­¦ä¹ å¹³å°ã€‚è¯¥å¹³å°é€šè¿‡äºŒç»´ç æ‰«ææä¾›æ•™æé…å¥—éŸ³é¢‘å†…å®¹çš„ä¾¿æ·è®¿é—®ï¼Œæ”¯æŒè¯¾å ‚æ•™å­¦ã€å®¶åº­å­¦ä¹ ã€è¯¾åå¤ä¹ ç­‰å¤šç§å­¦ä¹ åœºæ™¯ã€‚

### 1.2 äº§å“å®šä½

| æ–¹é¢         | æè¿°                                       |
| ------------ | ------------------------------------------ |
| **æ ¸å¿ƒä»·å€¼** | é€šè¿‡äºŒç»´ç è®©å­¦ç”Ÿéšæ—¶éšåœ°è·å–è‹±è¯­å¬åŠ›èµ„æº   |
| **ç›®æ ‡ç”¨æˆ·** | å°å­¦ç”Ÿï¼ˆ6-12å²ï¼‰ã€ä¸­å­¦ç”Ÿï¼ˆ13-18å²ï¼‰        |
| **ä½¿ç”¨åœºæ™¯** | è¯¾å ‚æ•™å­¦è¾…åŠ©ã€å®¶åº­ä½œä¸šã€è€ƒè¯•å¤ä¹ ã€é€šå‹¤å­¦ä¹  |
| **éƒ¨ç½²æ¨¡å¼** | Webåº”ç”¨ï¼ˆå“åº”å¼ï¼‰ï¼Œå¯é€šè¿‡ç§»åŠ¨æµè§ˆå™¨è®¿é—®    |
| **å•†ä¸šæ¨¡å¼** | å­¦æ ¡æ‰¹é‡è®¢é˜…ï¼ˆåŸºäºå­¦æœŸçš„æˆæƒï¼‰             |

### 1.3 äº§å“ç›®æ ‡

- æä¾›ç®€å•æ˜“ç”¨çš„éŸ³é¢‘æ’­æ”¾ä½“éªŒ
- æ”¯æŒäºŒç»´ç æ‰«æå¿«é€Ÿå®šä½ç‰¹å®šè¯¾ç¨‹
- è·Ÿè¸ªå­¦ä¹ è¿›åº¦å¹¶ç”Ÿæˆå­¦ä¹ æŠ¥å‘Š
- æ”¯æŒå¯æ‰©å±•çš„å†…å®¹ç®¡ç†å’Œæ‰©å±•
- é€šè¿‡RESTful APIæ”¯æŒå¤šå¹³å°è®¿é—®

### 1.4 æŠ€æœ¯æ ˆæ¦‚è§ˆ

| å±‚çº§           | æŠ€æœ¯                                           |
| -------------- | ---------------------------------------------- |
| **å‰ç«¯æ¡†æ¶**   | Next.js 16.1.1ï¼ˆApp Routerï¼‰ã€React 19         |
| **è¯­è¨€**       | TypeScript 5ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰                       |
| **æ ·å¼**       | Tailwind CSS 3.4ã€Shadcn/uiï¼ˆRadix UIï¼‰        |
| **çŠ¶æ€ç®¡ç†**   | TanStack Query v5ï¼ˆæœåŠ¡ç«¯ï¼‰ã€Zustandï¼ˆå®¢æˆ·ç«¯ï¼‰ |
| **è¡¨å•**       | React Hook Form + ZodéªŒè¯                      |
| **åç«¯**       | Supabaseï¼ˆPostgreSQLã€Authã€Storageï¼‰          |
| **éŸ³é¢‘æ’­æ”¾å™¨** | Howler.js                                      |
| **äºŒç»´ç **     | qrcode.reactã€jsPDF                            |

---

## 1.5 å•†ä¸šæ¨¡å¼ä¸ç›ˆåˆ©

### 1.5.1 æ”¶å…¥æ¨¡å¼

**ä¸»è¦æ¨¡å¼ï¼šå­¦æ ¡æ‰¹é‡è®¢é˜…**

- å­¦æ ¡ä¸ºæ‰€æœ‰å­¦ç”Ÿè´­ä¹°åŸºäºå­¦æœŸçš„è®¢é˜…
- ä»·æ ¼åŸºäºè‡ªå®šä¹‰æ—¶é•¿ï¼ˆä¾‹å¦‚ï¼Œè´­ä¹°æ—¥æœŸèµ·6ä¸ªæœˆï¼‰
- é€šè¿‡Excelå¯¼å…¥æ‰¹é‡é…ç½®è´¦æˆ·
- ç»Ÿä¸€çš„é»˜è®¤å¯†ç ï¼ˆä¾‹å¦‚123456ï¼‰ï¼Œé¦–æ¬¡ç™»å½•å¿…é¡»æ›´æ”¹

**å†…å®¹ç­–ç•¥ï¼šæ··åˆå†…å®¹æ¨¡å¼**

- æ ¸å¿ƒæ•™æï¼šä»å‡ºç‰ˆç¤¾è·å¾—æˆæƒï¼ˆå®˜æ–¹éŸ³é¢‘ï¼‰
- è¡¥å……ææ–™ï¼šè‡ªåˆ¶æˆ–ç®¡ç†å‘˜ä¸Šä¼ çš„å†…å®¹
- æ•™å¸ˆå†…å®¹ï¼šç®¡ç†å‘˜å¯ä»¥ä¸ºç‰¹å®šç­çº§ä¸Šä¼ è‡ªå®šä¹‰éŸ³é¢‘

**è®¿é—®æ§åˆ¶ï¼š**

- è®¢é˜…åˆ°æœŸï¼šå®Œå…¨æ’¤é”€è®¿é—®æƒé™
- åˆ°æœŸåæ²¡æœ‰å®½é™æœŸ
- å­¦ç”Ÿæ— æ³•å¯¼å‡ºæˆ–åˆ é™¤å­¦ä¹ æ•°æ®

### 1.5.2 å†…å®¹è´¨é‡ä¿è¯

**å®¡æ ¸æœºåˆ¶ï¼š**

- äººå·¥å®¡æ ¸ï¼šç®¡ç†å‘˜å®¡æ‰¹æ‰€æœ‰ä¸Šä¼ çš„å†…å®¹
- ç”¨æˆ·ä¸¾æŠ¥ï¼šå­¦ç”Ÿå¯ä»¥ä¸¾æŠ¥ä¸å½“å†…å®¹
- åˆå§‹ç‰ˆæœ¬æ²¡æœ‰AIæ£€æµ‹ï¼ˆä»…äººå·¥å®¡æ ¸ï¼‰
- æ²¡æœ‰ä¸“å®¶å®¡æ ¸å°ç»„ï¼ˆç®€åŒ–å·¥ä½œæµç¨‹ï¼‰

**äººå·¥å®¡æ ¸æµç¨‹ï¼š**

- ç®¡ç†å‘˜å®¡æ ¸æ‰€æœ‰ä¸Šä¼ çš„éŸ³é¢‘å’Œå­—å¹•å†…å®¹
- æ£€æŸ¥éŸ³é¢‘è´¨é‡ï¼ˆæ¸…æ™°åº¦ã€éŸ³é‡ã€æ— å™ªéŸ³ï¼‰
- éªŒè¯å†…å®¹é€‚å½“æ€§ï¼ˆæ— æ•æ„Ÿ/æ”¿æ²»å†…å®¹ï¼‰
- æ‰¹å‡†æˆ–æ‹’ç»å¹¶æä¾›åé¦ˆ
- åœ¨ `content_audit_logs` è¡¨ä¸­è·Ÿè¸ªå®¡æ ¸çŠ¶æ€

### 1.5.3 æ”¯ä»˜é›†æˆ

**æ”¯æŒçš„æ–¹å¼ï¼š**

- ä»…æ”¯æŒå­¦æ ¡æ‰¹é‡è´­ä¹°ï¼ˆä¸æ”¯æŒä¸ªäººæ”¯ä»˜ï¼‰
- é€šè¿‡å­¦æ ¡é‡‡è´­ç³»ç»Ÿæˆ–ç¦»çº¿å¤„ç†æ”¯ä»˜
- ä¸æ”¯æŒä¸ªäººç”¨æˆ·çš„å¾®ä¿¡æ”¯ä»˜/æ”¯ä»˜å®é›†æˆ

---

## 2. ç”¨æˆ·è§’è‰²ä¸æƒé™

### 2.1 å­¦ç”Ÿè§’è‰²

**åŠŸèƒ½ï¼š**

- æµè§ˆå’Œæ’­æ”¾æˆæƒçš„éŸ³é¢‘å†…å®¹
- ä½¿ç”¨æ’­æ”¾å™¨åŠŸèƒ½ï¼ˆé€Ÿåº¦æ§åˆ¶ã€ABå¾ªç¯ã€ç»§ç»­æ’­æ”¾ï¼‰
- æŸ¥çœ‹å­—å¹•/æ–‡æœ¬å†…å®¹ï¼ˆè‹±è¯­/ä¸­æ–‡/åŒè¯­ï¼‰
- æ”¶è—è¯¾ç¨‹ä»¥ä¾¿å¿«é€Ÿè®¿é—®
- æŸ¥çœ‹ä¸ªäººå­¦ä¹ è¿›åº¦å’ŒæŠ¥å‘Š
- é€šè¿‡äºŒç»´ç æ‰«æè®¿é—®è¯¾ç¨‹

**æ•°æ®è®¿é—®ï¼š**

- å¯¹æˆæƒæ•™æå’Œè¯¾ç¨‹çš„åªè¯»è®¿é—®
- å¯¹è‡ªå·±å­¦ä¹ æ•°æ®çš„å®Œå…¨è®¿é—®ï¼ˆæ”¶è—ã€å†å²ã€ç»Ÿè®¡ï¼‰
- æ— æ³•è®¿é—®ç®¡ç†åŠŸèƒ½æˆ–å…¶ä»–ç”¨æˆ·çš„æ•°æ®

**è´¦æˆ·çŠ¶æ€ï¼š** `active` | `suspended` | `banned`

### 2.2 ç®¡ç†å‘˜è§’è‰²

**åŠŸèƒ½ï¼š**

- ç®¡ç†æ‰€æœ‰éŸ³é¢‘å†…å®¹ï¼ˆä¸Šä¼ ã€ç¼–è¾‘ã€åˆ é™¤ï¼‰
- ç®¡ç†æ•™æã€å•å…ƒå’Œè¯¾ç¨‹ç»„ç»‡
- ç”Ÿæˆå’Œç®¡ç†äºŒç»´ç 
- æ‰¹é‡å¯¼å‡ºäºŒç»´ç ä¸ºPDF
- ç®¡ç†ç”¨æˆ·è´¦æˆ·ï¼ˆæŸ¥çœ‹ã€æš‚åœã€å°ç¦ï¼‰
- é€šè¿‡Excelæ‰¹é‡å¯¼å…¥å­¦ç”Ÿ
- æŸ¥çœ‹ç­çº§/å­¦ç”Ÿå­¦ä¹ æ•°æ®ï¼ˆéœ€å­¦æ ¡æˆæƒï¼‰
- ç”Ÿæˆç­çº§å­¦ä¹ æŠ¥å‘Šï¼ˆå¯¼å‡ºExcel/PDFï¼‰
- ä¸ºç‰¹å®šç­çº§ä¸Šä¼ è‡ªå®šä¹‰éŸ³é¢‘
- æŸ¥çœ‹å…¨å±€ç»Ÿè®¡å’Œåˆ†æ
- é…ç½®ç³»ç»Ÿè®¾ç½®
- æŸ¥çœ‹å®¡è®¡/æ“ä½œæ—¥å¿—
- å®¡æ ¸å’Œæ‰¹å‡†ä¸Šä¼ çš„å†…å®¹

**æ•°æ®è®¿é—®ï¼š**

- å®Œå…¨çš„å†…å®¹ç®¡ç†æƒé™
- å¯¹æ‰€æœ‰ç”¨æˆ·æ•°æ®å’Œç»Ÿè®¡çš„åªè¯»è®¿é—®
- å¯ä»¥æŸ¥çœ‹æˆæƒç­çº§çš„å­¦ä¹ æ•°æ®
- æ— æ³•è®¿é—®è¶…çº§ç®¡ç†å‘˜åŠŸèƒ½

**æ³¨æ„ï¼š** æ²¡æœ‰å•ç‹¬çš„è€å¸ˆè§’è‰² - ç®¡ç†å‘˜å¤„ç†æ‰€æœ‰ä¸æ•™å­¦ç›¸å…³çš„åŠŸèƒ½

### 2.3 è¶…çº§ç®¡ç†å‘˜è§’è‰²

**åŠŸèƒ½ï¼š**

- æ‰€æœ‰ç®¡ç†å‘˜åŠŸèƒ½
- ç®¡ç†ç®¡ç†å‘˜è´¦æˆ·
- è®¿é—®ç³»ç»Ÿçº§é…ç½®
- æŸ¥çœ‹å®Œæ•´çš„å®¡è®¡æ—¥å¿—

### 2.4 è®¿å®¢æ¨¡å¼

**åŠŸèƒ½ï¼š**

- æ’­æ”¾éŸ³é¢‘å†…å®¹ï¼ˆæœ‰é™ï¼‰
- ä½¿ç”¨åŸºæœ¬æ’­æ”¾å™¨åŠŸèƒ½ï¼ˆæ’­æ”¾/æš‚åœã€é€Ÿåº¦æ§åˆ¶ã€ABå¾ªç¯ï¼‰
- æŸ¥çœ‹å­—å¹•

**é™åˆ¶ï¼š**

- æ— æ³•ä¿å­˜å­¦ä¹ è¿›åº¦
- æ— æ³•æ”¶è—è¯¾ç¨‹
- æ— æ³•æŸ¥çœ‹å­¦ä¹ ç»Ÿè®¡
- æ— æ³•è®¿é—®ä»˜è´¹å†…å®¹
- åŸºäºlocalStorageçš„ä¼šè¯ï¼ˆä¸´æ—¶è®¿å®¢IDï¼‰

---

## 3. åŠŸèƒ½éœ€æ±‚

### 3.1 ç”¨æˆ·è®¤è¯ç³»ç»Ÿ

#### 3.1.1 æ³¨å†Œä¸ç™»å½•æ–¹å¼

| æ–¹å¼      | çŠ¶æ€      | æè¿°                            |
| --------- | --------- | ------------------------------- |
| é‚®ç®±+å¯†ç  | âœ… å·²å®ç° | é€šè¿‡Supabase Authçš„æ ‡å‡†è®¤è¯     |
| å¾®ä¿¡ç™»å½•  | âœ… å·²å®ç° | é€šè¿‡å¾®ä¿¡å¼€æ”¾å¹³å°çš„OAuth         |
| æ‰‹æœº+çŸ­ä¿¡ | ğŸ”„ è®¡åˆ’ä¸­ | é€šè¿‡é˜¿é‡Œäº‘/è…¾è®¯äº‘å‘é€çŸ­ä¿¡éªŒè¯ç  |
| è®¿å®¢æ¨¡å¼  | âœ… å·²å®ç° | åŸºäºcookieçš„ä¸´æ—¶è®¿å®¢IDè®¿é—®      |
| æ‰¹é‡å¯¼å…¥  | ğŸ”„ è®¡åˆ’ä¸­ | é€šè¿‡Excelæ‰¹é‡åˆ›å»ºå­¦æ ¡è´¦æˆ·       |

**é‚®ç®±+å¯†ç å®ç°ï¼š**

- é‚®ç®±æ ¼å¼éªŒè¯
- å¯†ç è¦æ±‚ï¼šæœ€å°‘6ä¸ªå­—ç¬¦ï¼Œå­—æ¯+æ•°å­—
- å¯†ç åŠ å¯†ï¼šbcryptï¼ˆé€šè¿‡Supabaseï¼‰
- é€šè¿‡é‚®ç®±é‡ç½®å¯†ç 

**å¾®ä¿¡ç™»å½•å®ç°ï¼š**

- OAuth æµç¨‹
- è·å–2.0æˆæƒunionidå’Œopenid
- é¦–æ¬¡ç™»å½•æ—¶è‡ªåŠ¨åˆ›å»ºç”¨æˆ·è´¦æˆ·
- åŒæ­¥å¾®ä¿¡å¤´åƒå’Œæ˜µç§°

**è®¿å®¢æ¨¡å¼å®ç°ï¼š**

- ç”Ÿæˆä¸´æ—¶çš„è®¿å®¢IDå­˜å‚¨åœ¨cookieä¸­
- æ— æœåŠ¡ç«¯ä¼šè¯
- æ’­æ”¾å®Œæˆåæç¤ºæ³¨å†Œ
- æ— ç¼å‡çº§ä¸ºæ³¨å†Œç”¨æˆ·

**æ‰¹é‡å¯¼å…¥å®ç°ï¼š**

- ç®¡ç†å‘˜ä¸Šä¼ åŒ…å«å­¦ç”Ÿåˆ—è¡¨çš„Excelæ–‡ä»¶ï¼ˆå§“åã€å­¦å·ã€å¹´çº§ã€ç­çº§ï¼‰
- ç³»ç»Ÿç”Ÿæˆç»Ÿä¸€é»˜è®¤å¯†ç ï¼ˆä¾‹å¦‚123456ï¼‰çš„è´¦æˆ·
- å­¦ç”Ÿé¦–æ¬¡ç™»å½•æ—¶å¼ºåˆ¶æ›´æ”¹å¯†ç 
- æ‰¹é‡åˆ›å»ºè´¦æˆ·å¹¶å…³è”å­¦æ ¡è®¢é˜…

#### 3.1.2 ç”¨æˆ·èµ„æ–™

| åŠŸèƒ½              | çŠ¶æ€      |
| ----------------- | --------- |
| æŸ¥çœ‹/ç¼–è¾‘ä¸ªäººä¿¡æ¯ | âœ… å·²å®ç° |
| æŸ¥çœ‹å­¦ä¹ ç»Ÿè®¡      | âœ… å·²å®ç° |
| ç®¡ç†æ”¶è—åˆ—è¡¨      | âœ… å·²å®ç° |
| æŸ¥çœ‹å­¦ä¹ å†å²      | âœ… å·²å®ç° |
| é€€å‡ºç™»å½•          | âœ… å·²å®ç° |

### 3.2 å†…å®¹ç»„ç»‡ç»“æ„

#### 3.2.1 ä¸‰å±‚å±‚çº§ç»“æ„

```
æ•™æ (Textbook)
â”œâ”€â”€ å•å…ƒ1 (Unit)
â”‚   â”œâ”€â”€ è¯¾ç¨‹1 (Lesson)
â”‚   â”‚   â”œâ”€â”€ éŸ³é¢‘æ–‡ä»¶ (Audios)
â”‚   â”‚   â”œâ”€â”€ å­—å¹•
â”‚   â”‚   â””â”€â”€ äºŒç»´ç 
â”‚   â”œâ”€â”€ è¯¾ç¨‹2
â”‚   â””â”€â”€ ...
â”œâ”€â”€ å•å…ƒ2
â””â”€â”€ ...
```

#### 3.2.2 æ•™æå±æ€§

| å±æ€§             | ç±»å‹    | æè¿°                                       |
| ---------------- | ------- | ------------------------------------------ |
| id               | UUID    | ä¸»é”®                                       |
| name             | string  | æ•™æåç§°ï¼ˆä¾‹å¦‚"äººæ•™ç‰ˆå°å­¦è‹±è¯­ä¸‰å¹´çº§ä¸Šå†Œ"ï¼‰ |
| cover_url        | string  | å°é¢å›¾ç‰‡URL                                |
| grade            | string  | å¹´çº§æ ‡ç­¾                                   |
| publisher        | string  | å‡ºç‰ˆç¤¾åç§°                                 |
| version          | string  | ç‰ˆæœ¬å·                                     |
| description      | text    | æè¿°                                       |
| is_free          | boolean | æ˜¯å¦å®Œå…¨å…è´¹                               |
| free_units_count | integer | å…è´¹å•å…ƒæ•°é‡                               |
| created_by       | UUID    | åˆ›å»ºè€…ç®¡ç†å‘˜ID                             |

#### 3.2.3 å•å…ƒå±æ€§

| å±æ€§         | ç±»å‹    | æè¿°                             |
| ------------ | ------- | -------------------------------- |
| id           | UUID    | ä¸»é”®                             |
| textbook_id  | UUID    | çˆ¶æ•™æå¼•ç”¨                       |
| name         | string  | å•å…ƒåç§°ï¼ˆä¾‹å¦‚"Unit 1 - Hello"ï¼‰ |
| order_num    | integer | æ˜¾ç¤ºé¡ºåº                         |
| description  | text    | å•å…ƒæè¿°                         |
| is_free      | boolean | æ˜¯å¦å…è´¹è®¿é—®                     |
| requires_vip | boolean | æ˜¯å¦éœ€è¦VIP                      |

#### 3.2.4 è¯¾ç¨‹å±æ€§

| å±æ€§               | ç±»å‹      | æè¿°            |
| ------------------ | --------- | --------------- |
| id                 | UUID      | ä¸»é”®            |
| unit_id            | UUID      | çˆ¶å•å…ƒå¼•ç”¨      |
| name               | string    | è¯¾ç¨‹åç§°        |
| order_num          | integer   | æ˜¾ç¤ºé¡ºåº        |
| audio_url          | string    | ä¸»è¦éŸ³é¢‘æ–‡ä»¶URL |
| audio_duration     | integer   | æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰  |
| subtitle_text      | JSONB     | å­—å¹•å†…å®¹        |
| qr_code_token      | string    | å”¯ä¸€äºŒç»´ç ä»¤ç‰Œ  |
| qr_code_expires_at | timestamp | å¯é€‰è¿‡æœŸæ—¶é—´    |

#### 3.2.5 éŸ³é¢‘å±æ€§ï¼ˆå¤šéŸ³é¢‘æ”¯æŒï¼‰

| å±æ€§          | ç±»å‹    | æè¿°                              |
| ------------- | ------- | --------------------------------- |
| id            | UUID    | ä¸»é”®                              |
| lesson_id     | UUID    | çˆ¶è¯¾ç¨‹å¼•ç”¨                        |
| title         | string  | éŸ³é¢‘æ ‡é¢˜                          |
| type          | enum    | "main" / "listening" / "practice" |
| audio_url     | string  | éŸ³é¢‘æ–‡ä»¶URL                       |
| duration      | integer | æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰                    |
| order_num     | integer | æ˜¾ç¤ºé¡ºåº                          |
| is_default    | boolean | æ˜¯å¦é»˜è®¤éŸ³é¢‘                      |
| subtitle_text | JSONB   | å­—å¹•å†…å®¹                          |

### 3.3 éŸ³é¢‘æ’­æ”¾å™¨

#### 3.3.1 åŸºæœ¬æ’­æ”¾åŠŸèƒ½ âœ…

| åŠŸèƒ½          | çŠ¶æ€ | æè¿°                 |
| ------------- | ---- | -------------------- |
| æ’­æ”¾/æš‚åœ     | âœ…   | åˆ‡æ¢æ’­æ”¾çŠ¶æ€         |
| è¿›åº¦æ¡        | âœ…   | å¯æœç´¢çš„è¿›åº¦æ§åˆ¶     |
| éŸ³é‡æ§åˆ¶      | âœ…   | å¯è°ƒèŠ‚çš„éŸ³é‡æ»‘å—     |
| æ—¶é—´æ˜¾ç¤º      | âœ…   | å½“å‰æ—¶é—´/æ€»æ—¶é•¿      |
| ä¸Šä¸€é¦–/ä¸‹ä¸€é¦– | âœ…   | åœ¨å•å…ƒæ’­æ”¾åˆ—è¡¨ä¸­å¯¼èˆª |
| åŠ è½½çŠ¶æ€      | âœ…   | åŠ è½½æŒ‡ç¤ºå™¨           |

#### 3.3.2 é«˜çº§æ’­æ”¾åŠŸèƒ½ âœ…

**å¯å˜é€Ÿåº¦æ’­æ”¾ï¼š**

- æ”¯æŒé€Ÿåº¦ï¼š0.5xã€0.75xã€1.0xã€1.25xã€1.5xã€2.0x
- æ‰€æœ‰é€Ÿåº¦ä¸‹ä¿æŒéŸ³è°ƒ
- è®°ä½ç”¨æˆ·åå¥½

**ABå¾ªç¯ï¼š**

- æ‰‹åŠ¨æ¨¡å¼ï¼šç‚¹å‡»è®¾ç½®Aç‚¹ï¼Œå†ç‚¹å‡»è®¾ç½®Bç‚¹
- è‡ªåŠ¨æ¨¡å¼ï¼šç‚¹å‡»å­—å¹•å¥å­è¿›è¡Œå¾ªç¯
- è¿›åº¦æ¡ä¸Šçš„è§†è§‰æ ‡è®°
- å¾ªç¯è®¡æ•°å™¨æ˜¾ç¤º
- æ¸…é™¤æŒ‰é’®é‡ç½®

**ç»§ç»­æ’­æ”¾ï¼š**

- è‡ªåŠ¨ä¿å­˜æ’­æ”¾ä½ç½®
- ä¸‹æ¬¡è®¿é—®æ—¶æ¢å¤
- æŒ‰è¯¾ç¨‹ä½ç½®è·Ÿè¸ª
- å®Œæˆåæ¸…é™¤

#### 3.3.3 å­—å¹•æ˜¾ç¤º âœ…

| åŠŸèƒ½                | çŠ¶æ€ |
| ------------------- | ---- |
| ä»…è‹±è¯­æ¨¡å¼          | âœ…   |
| ä»…ä¸­æ–‡æ¨¡å¼          | âœ…   |
| åŒè¯­æ¨¡å¼ï¼ˆEN + ZHï¼‰ | âœ…   |
| ç‚¹å‡»å­—å¹•è·³è½¬        | âœ…   |
| è‡ªåŠ¨æ»šåŠ¨åˆ°å½“å‰      | âœ…   |
| é«˜äº®å½“å‰å­—å¹•        | âœ…   |
| å­—ä½“å¤§å°è°ƒæ•´        | âœ…   |

**æ”¯æŒçš„å­—å¹•æ ¼å¼ï¼š**

- SRTï¼ˆæ¨èï¼‰
- VTT
- JSONï¼ˆè‡ªå®šä¹‰æ ¼å¼ï¼‰

#### 3.3.4 æ’­æ”¾åˆ—è¡¨

- æ˜¾ç¤ºå½“å‰å•å…ƒä¸­çš„æ‰€æœ‰è¯¾ç¨‹
- é«˜äº®å½“å‰æ’­æ”¾é¡¹
- ç‚¹å‡»åˆ‡æ¢æ’­æ”¾
- æ˜¾ç¤ºæ’­æ”¾çŠ¶æ€å›¾æ ‡
- è‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€é¦–é€‰é¡¹

### 3.4 äºŒç»´ç ç³»ç»Ÿ

#### 3.4.1 äºŒç»´ç ç”Ÿæˆ âœ…

**è‡ªåŠ¨ç”Ÿæˆï¼š**

- æ¯ä¸ªè¯¾ç¨‹å”¯ä¸€çš„äºŒç»´ç 
- åŒ…å«è¯¾ç¨‹IDå’Œè®¿é—®ä»¤ç‰Œ
- URLæ ¼å¼ï¼š`https://domain.com/play?code=XXXXXX`

**ä»¤ç‰Œæ ¼å¼ï¼š**

- 12ä¸ªå­—ç¬¦çš„å”¯ä¸€ä»¤ç‰Œ
- æ ¼å¼ï¼šXXXXXX-XXXXXX
- é€šè¿‡UUID + æ—¶é—´æˆ³ç”Ÿæˆ

**è¿‡æœŸé€‰é¡¹ï¼š**

- é»˜è®¤ï¼šæ°¸ä¸è¿‡æœŸï¼ˆç”¨äºå°åˆ·æ•™æï¼‰
- å¯é€‰ï¼š1å¤©ã€7å¤©ã€30å¤©ã€è‡ªå®šä¹‰æ—¥æœŸ
- è¿‡æœŸä»£ç æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯å¹¶æä¾›é‡æ–°ç”Ÿæˆé€‰é¡¹

**è‡ªå®šä¹‰ï¼š**

- æ ‡å¿—æ”¾ç½®ï¼ˆå±…ä¸­ï¼Œæœ€å¤§30%é¢ç§¯ï¼‰
- è‡ªå®šä¹‰é¢œè‰²ï¼ˆå‰æ™¯è‰²/èƒŒæ™¯è‰²ï¼‰
- å°ºå¯¸é€‰é¡¹ï¼ˆ200x200 - 1000x1000ï¼‰
- è¾¹æ¡†é€‰é¡¹

#### 3.4.2 äºŒç»´ç æ‰«ææµç¨‹ âœ…

```
1. ç”¨æˆ·æ‰«æäºŒç»´ç 
2. é‡å®šå‘åˆ° /play?code=xxx
3. éªŒè¯ä»¤ç‰Œ
4. æ£€æŸ¥è¿‡æœŸæ—¶é—´
5. å¦‚æœæœªç™»å½• â†’ æ˜¾ç¤ºç™»å½•/è®¿å®¢é€‰é¡¹
6. è·å–è¯¾ç¨‹æ•°æ®
7. å¼€å§‹éŸ³é¢‘æ’­æ”¾
8. å¤„ç†æ— æ•ˆ/è¿‡æœŸçš„äºŒç»´ç 
```

#### 3.4.4 äºŒç»´ç åˆ†å‘æ¸ é“

**å°åˆ·æ•™æï¼š**

- æ°¸ä¹…äºŒç»´ç ï¼ˆæ°¸ä¸è¿‡æœŸï¼‰
- ç›´æ¥å°åˆ·åœ¨æ•™æé¡µé¢ä¸Š
- éœ€è¦ä¸å‡ºç‰ˆç¤¾åˆä½œ

**æ•™å¸ˆåˆ†å‘ï¼š**

- å¸¦å¯é€‰è¿‡æœŸçš„äºŒç»´ç 
- é€šè¿‡å¾®ä¿¡/é’‰é’‰åˆ†å‘
- å¦‚éœ€è¦å¯ä»¥é‡æ–°ç”Ÿæˆ

**å­¦æ ¡æµ·æŠ¥/å±•ç¤ºï¼š**

- å¸¦ç™»å½•éªŒè¯çš„äºŒç»´ç 
- è´´åœ¨å…¬å…±åŒºåŸŸï¼ˆæ•™å®¤ã€èµ°å»Šï¼‰
- å®‰å…¨è€ƒè™‘ï¼šéœ€è¦è®¤è¯

**åœ¨çº¿è¥é”€ï¼š**

- çŸ­æœŸä¿ƒé”€ç 
- å¯è·Ÿè¸ªçš„æ¥æºå½’å› 
- é™æ—¶æ´»åŠ¨

#### 3.4.3 æ‰¹é‡å¯¼å‡º ğŸ”„

| åŠŸèƒ½                      | çŠ¶æ€      |
| ------------------------- | --------- |
| é€‰æ‹©æ•™æ/å•å…ƒè¿›è¡Œæ‰¹é‡å¯¼å‡º | âœ…        |
| PDFç”Ÿæˆï¼ˆA4ï¼Œæ¯é¡µ6ä¸ªï¼‰    | âœ…        |
| åŒ…å«è¯¾ç¨‹åç§°              | âœ…        |
| è‡ªå®šä¹‰å¸ƒå±€æ¨¡æ¿            | ğŸ”„ è®¡åˆ’ä¸­ |
| é«˜åˆ†è¾¨ç‡è¾“å‡ºï¼ˆ300dpiï¼‰    | âœ…        |

### 3.5 æ”¶è—ç³»ç»Ÿ âœ…

- å•å‡»æ·»åŠ /å–æ¶ˆæ”¶è—
- æ”¶è—åˆ—è¡¨é¡µé¢æ”¯æŒæ’åº
- è¯¾ç¨‹å¡ç‰‡ä¸Šçš„æ”¶è—æŒ‡ç¤ºå™¨
- ä»æ”¶è—ä¸­å¿«é€Ÿè®¿é—®
- è·¨è®¾å¤‡åŒæ­¥ï¼ˆå¯¹äºç™»å½•ç”¨æˆ·ï¼‰

### 3.6 å­¦ä¹ åˆ†æ

#### 3.6.1 å­¦ç”Ÿä»ªè¡¨æ¿ âœ…

| æŒ‡æ ‡         | çŠ¶æ€ | æè¿°           |
| ------------ | ---- | -------------- |
| æ€»å­¦ä¹ æ—¶é—´   | âœ…   | ç´¯è®¡æ’­æ”¾æ—¶é•¿   |
| æ¯æ—¥å­¦ä¹ æ—¶é—´ | âœ…   | ä»Šå¤©çš„å­¦ä¹ æ—¶é•¿ |
| æ¯å‘¨å­¦ä¹ æ—¶é—´ | âœ…   | æœ¬å‘¨çš„å­¦ä¹ æ—¶é•¿ |
| æ¯æœˆå­¦ä¹ æ—¶é—´ | âœ…   | æœ¬æœˆçš„å­¦ä¹ æ—¶é•¿ |
| è¿ç»­å­¦ä¹ å¤©æ•° | âœ…   | è¿ç»­å­¦ä¹ çš„å¤©æ•° |
| å·²å®Œæˆè¯¾ç¨‹   | âœ…   | å®Œæˆçš„è¯¾ç¨‹æ€»æ•° |
| å­¦ä¹ æ—¥å†     | âœ…   | çƒ­åŠ›å›¾å¯è§†åŒ–   |

**è¿ç»­å¤©æ•°è®¡ç®—ï¼š**

- æ¯å¤©æœ€å°‘5åˆ†é’Ÿæ‰è®¡å…¥
- é”™è¿‡ä¸€å¤©åé‡ç½®
- è·Ÿè¸ªå½“å‰å’Œæœ€é•¿è¿ç»­å¤©æ•°

#### 3.6.2 å­¦ä¹ æŠ¥å‘Š ğŸ”„

**æŠ¥å‘Šæ ¼å¼ï¼š**

- **Excelå¯¼å‡ºï¼š** ç”¨äºæ•™å¸ˆåˆ†æçš„è¯¦ç»†å­¦ä¹ æ•°æ®
- **å®æ—¶ä»ªè¡¨æ¿ï¼š** å®æ—¶ç»Ÿè®¡æ˜¾ç¤ºï¼ˆæ— éœ€å¯¼å‡ºï¼‰

**ExcelæŠ¥å‘Šå†…å®¹ï¼š**

- å§“åã€å­¦å·ã€å¹´çº§ã€ç­çº§
- æ€»å­¦ä¹ æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
- å·²å®Œæˆè¯¾ç¨‹æ•°é‡
- æ¯æ—¥å­¦ä¹ æ˜ç»†
- è¿ç»­å­¦ä¹ å¤©æ•°
- æœ€åæ´»åŠ¨æ—¥æœŸ

**å®ç°ï¼š**

```typescript
async function generateClassReport(classId: string) {
  const students = await getClassStudents(classId);
  const data = await Promise.all(
    students.map(async (student) => {
      const stats = await getUserStats(student.id);
      return {
        name: student.username,
        studentId: student.student_id,
        totalMinutes: stats.total_learning_minutes,
        lessonsCompleted: stats.total_lessons_completed,
        streakDays: stats.streak_days,
        lastActivity: stats.last_activity_at,
      };
    })
  );

  return exportToExcel(data);
}
```

#### 3.6.3 ç®¡ç†å‘˜åˆ†æ âœ…

| æŒ‡æ ‡              | çŠ¶æ€ |
| ----------------- | ---- |
| æ—¥æ´»è·ƒç”¨æˆ·ï¼ˆDAUï¼‰ | âœ…   |
| æœˆæ´»è·ƒç”¨æˆ·ï¼ˆMAUï¼‰ | âœ…   |
| æ–°ç”¨æˆ·æ³¨å†Œ        | âœ…   |
| æ€»æ’­æ”¾æ¬¡æ•°        | âœ…   |
| çƒ­é—¨è¯¾ç¨‹æ’å      | âœ…   |
| ç”¨æˆ·ç•™å­˜æŒ‡æ ‡      | âœ…   |
| æ•°æ®å¯¼å‡ºï¼ˆCSVï¼‰   | âœ…   |

### 3.7 è®¢é˜…ç®¡ç†ç³»ç»Ÿ ğŸ”„

#### 3.7.1 å­¦æ ¡è®¢é˜…

**è®¢é˜…æ¨¡å¼ï¼š**

- è‡ªå®šä¹‰æ—¶é•¿ï¼ˆä¾‹å¦‚ï¼Œè´­ä¹°æ—¥æœŸèµ·6ä¸ªæœˆï¼‰
- å­¦æ ¡çº§è®¢é˜…ï¼ˆè¦†ç›–æ‰€æœ‰å­¦ç”Ÿï¼‰
- æ‰¹é‡è´¦æˆ·é…ç½®
- è‡ªåŠ¨è¿‡æœŸå¤„ç†

**è®¢é˜…å±æ€§ï¼š**

- å­¦æ ¡åç§°å’Œè”ç³»æ–¹å¼
- å¼€å§‹æ—¥æœŸå’Œç»“æŸæ—¥æœŸ
- å­¦ç”Ÿè´¦æˆ·æ•°é‡
- è®¢é˜…çŠ¶æ€ï¼ˆæ´»è·ƒã€è¿‡æœŸã€æš‚åœï¼‰
- æ”¯ä»˜çŠ¶æ€ï¼ˆç¦»çº¿è·Ÿè¸ªï¼‰

**è®¿é—®æ§åˆ¶ï¼š**

- æ´»è·ƒè®¢é˜…ï¼šå®Œå…¨è®¿é—®æ‰€æœ‰å†…å®¹
- è¿‡æœŸè®¢é˜…ï¼šç«‹å³å®Œå…¨æ’¤é”€è®¿é—®æƒé™
- åˆ°æœŸåæ²¡æœ‰å®½é™æœŸ
- åˆ°æœŸå‰7å¤©é€šçŸ¥å­¦ç”Ÿ

**è¿‡æœŸå¤„ç†ï¼š**

- **é‚®ä»¶æé†’ï¼š** åœ¨åˆ°æœŸå‰7ã€3ã€1å¤©å‘é€ç»™å­¦æ ¡ç®¡ç†å‘˜
- **å­¦ç”Ÿå¼¹çª—ï¼š** ç™»å½•æ—¶æ˜¾ç¤ºåˆ°æœŸé€šçŸ¥ï¼ˆ7å¤©å†…ï¼‰
- **ç«‹å³ç¦ç”¨ï¼š** åˆ°æœŸæ—¥æœŸæ—¶ç¦ç”¨æ‰€æœ‰å­¦ç”Ÿè´¦æˆ·
- **æ— åªè¯»æ¨¡å¼ï¼š** åˆ°æœŸåæ²¡æœ‰å®½é™æœŸæˆ–æœ‰é™è®¿é—®

**å®ç°ï¼š**

```typescript
// å®šæœŸä»»åŠ¡æ£€æŸ¥å’Œå¤„ç†å³å°†è¿‡æœŸçš„è®¢é˜…
async function checkExpiringSubscriptions() {
  const today = new Date();
  const sevenDaysLater = addDays(today, 7);

  // æŸ¥æ‰¾7å¤©å†…åˆ°æœŸçš„è®¢é˜…
  const expiringSoon = await db.query(
    "SELECT * FROM subscriptions WHERE end_date = $1 AND status = $2",
    [sevenDaysLater, "active"]
  );

  // å‘é€é‚®ä»¶æé†’
  for (const sub of expiringSoon) {
    await sendExpirationReminder(sub.school_contact, 7);
  }

  // æŸ¥æ‰¾å·²è¿‡æœŸçš„è®¢é˜…
  const expired = await db.query(
    "SELECT * FROM subscriptions WHERE end_date < $1 AND status = $2",
    [today, "active"]
  );

  // ç¦ç”¨æ‰€æœ‰å­¦ç”Ÿè´¦æˆ·
  for (const sub of expired) {
    await disableSubscriptionAccess(sub.id);
    await updateSubscriptionStatus(sub.id, "expired");
  }
}
```

#### 3.7.2 æ‰¹é‡å­¦ç”Ÿå¯¼å…¥

**å¯¼å…¥æµç¨‹ï¼ˆæ‰¹é‡å¤„ç†ï¼‰ï¼š**

- ç®¡ç†å‘˜ä¸Šä¼ åŒ…å«åˆ—çš„Excelæ–‡ä»¶ï¼šå§“åã€å­¦å·ã€å¹´çº§ã€ç­çº§
- ç³»ç»ŸéªŒè¯æ•°æ®æ ¼å¼
- ä»¥50ä¸ªå­¦ç”Ÿä¸ºä¸€æ‰¹è¿›è¡Œå¤„ç†
- å¯¼å…¥è¿‡ç¨‹ä¸­æ˜¾ç¤ºè¿›åº¦æ¡
- ç”Ÿæˆé»˜è®¤å¯†ç ï¼ˆ123456ï¼‰çš„è´¦æˆ·
- å°†è´¦æˆ·å…³è”åˆ°å­¦æ ¡è®¢é˜…
- å¯¼å‡ºå¸¦å‡­è¯çš„è´¦æˆ·åˆ—è¡¨

**Excelæ¨¡æ¿ï¼š**

```
| å§“å | å­¦å· | å¹´çº§ | ç­çº§ |
|------|-------|------|------|
| å¼ ä¸‰ | 2024001 | 3 | 1 |
| æå›› | 2024002 | 3 | 1 |
```

**éªŒè¯è§„åˆ™ï¼š**

- å­¦å·å¿…é¡»å”¯ä¸€
- å¹´çº§å¿…é¡»æœ‰æ•ˆï¼ˆ1-12ï¼‰
- ç­çº§å¿…é¡»ä¸ºå­—æ¯æ•°å­—
- æ¯æ¬¡å¯¼å…¥æœ€å¤š1000åå­¦ç”Ÿ

**æ‰¹é‡å¤„ç†å®ç°ï¼š**

```typescript
async function batchImportStudents(students: Student[], batchSize = 50) {
  const batches = chunk(students, batchSize);

  for (let i = 0; i < batches.length; i++) {
    const batch = batches[i];

    // æ‰¹é‡åˆ›å»ºè´¦æˆ·
    await Promise.all(batch.map((student) => createStudentAccount(student)));

    // æ›´æ–°è¿›åº¦
    const progress = ((i + 1) / batches.length) * 100;
    await updateImportProgress(progress);
  }
}
```

### 3.8 ç¦»çº¿ç¼“å­˜ç³»ç»Ÿ ğŸ”„

**ä»…HTTPç¼“å­˜ï¼š**

- ä¾èµ–æµè§ˆå™¨çš„åŸç”ŸHTTPç¼“å­˜æœºåˆ¶
- ä¸å®ç°Service Worker
- æ²¡æœ‰ä¸»åŠ¨ç¦»çº¿æ”¯æŒ
- åœ¨éŸ³é¢‘æ–‡ä»¶ä¸Šè®¾ç½®Cache-Controlå¤´
- ç”¨æˆ·å¿…é¡»åœ¨çº¿æ‰èƒ½è®¿é—®å†…å®¹

**ç¼“å­˜å¤´é…ç½®ï¼š**

```typescript
// ä¸ºéŸ³é¢‘æ–‡ä»¶è®¾ç½®ç¼“å­˜å¤´
res.setHeader("Cache-Control", "public, max-age=31536000, immutable");
res.setHeader("ETag", fileHash);
```

**æœªæ¥è€ƒè™‘ï¼š**

- å¯èƒ½åœ¨ç¬¬ä¸‰é˜¶æ®µæ·»åŠ å¸¦Service Workerçš„PWAæ”¯æŒ
- æœªæ¥å¯èƒ½æ·»åŠ ç”¨äºç¦»çº¿è®¿é—®çš„æ‰‹åŠ¨ä¸‹è½½åŠŸèƒ½

### 3.9 ç®¡ç†ä»ªè¡¨æ¿

#### 3.7.1 ä»ªè¡¨æ¿æ¦‚è§ˆ âœ…

- å¿«é€Ÿç»Ÿè®¡å¡ç‰‡ï¼ˆç”¨æˆ·ã€å†…å®¹ã€æ’­æ”¾ï¼‰
- æœ€è¿‘æ´»åŠ¨åŠ¨æ€
- ç³»ç»Ÿå¥åº·æŒ‡æ ‡
- å¿«æ·æ“ä½œæŒ‰é’®

#### 3.7.2 å†…å®¹ç®¡ç† âœ…

**æ•™æç®¡ç†ï¼š**

- CRUDæ“ä½œï¼ˆåˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ï¼‰
- å°é¢ä¸Šä¼ 
- å¹´çº§/å‡ºç‰ˆç¤¾ç­›é€‰
- æœç´¢åŠŸèƒ½

**å•å…ƒç®¡ç†ï¼š**

- åœ¨æ•™æä¸‹åˆ›å»ºå•å…ƒ
- æ‹–æ”¾æ’åº
- æ‰¹é‡æ“ä½œ
- åµŒå¥—æ˜¾ç¤º

**è¯¾ç¨‹ç®¡ç†ï¼š**

- åœ¨å•å…ƒä¸‹åˆ›å»ºè¯¾ç¨‹
- éŸ³é¢‘æ–‡ä»¶ä¸Šä¼ ï¼ˆMP3ã€M4Aã€WAVã€OGGï¼‰
- å­—å¹•æ–‡ä»¶ä¸Šä¼ ï¼ˆSRTã€VTTï¼‰
- è‡ªåŠ¨æ—¶é•¿æå–
- æ‰¹é‡ä¸Šä¼ ï¼ˆæœ€å¤š20ä¸ªæ–‡ä»¶ï¼‰
- è¿›åº¦æŒ‡ç¤ºå™¨

**éŸ³é¢‘ç®¡ç†ï¼š**

- æ¯ä¸ªè¯¾ç¨‹å¤šä¸ªéŸ³é¢‘
- éŸ³é¢‘ç±»å‹åˆ†ç±»ï¼ˆmainã€listeningã€practiceï¼‰
- è®¾ç½®é»˜è®¤éŸ³é¢‘
- éŸ³é¢‘æ›¿æ¢

#### 3.7.3 ç”¨æˆ·ç®¡ç† âœ…

| åŠŸèƒ½             | çŠ¶æ€ |
| ---------------- | ---- |
| å¸¦æœç´¢çš„ç”¨æˆ·åˆ—è¡¨ | âœ…   |
| ç”¨æˆ·è¯¦æƒ…è§†å›¾     | âœ…   |
| ç”¨æˆ·ç»Ÿè®¡         | âœ…   |
| æš‚åœ/å°ç¦ç”¨æˆ·    | âœ…   |
| å¯†ç é‡ç½®         | âœ…   |
| è§’è‰²ç®¡ç†         | âœ…   |

#### 3.7.4 åª’ä½“åº“ âœ…

- æµè§ˆæ‰€æœ‰ä¸Šä¼ çš„åª’ä½“
- æŒ‰ç±»å‹ç­›é€‰ï¼ˆéŸ³é¢‘ã€å›¾ç‰‡ï¼‰
- æŒ‰æ–‡ä»¶åæœç´¢
- åˆ é™¤æœªä½¿ç”¨çš„æ–‡ä»¶
- å­˜å‚¨ç»Ÿè®¡

#### 3.7.5 ç³»ç»Ÿè®¾ç½® âœ…

- ç«™ç‚¹é…ç½®
- ä¸Šä¼ é™åˆ¶
- è®¿é—®æ§åˆ¶è®¾ç½®
- é‚®ä»¶é€šçŸ¥é…ç½®ï¼ˆè®¡åˆ’ä¸­ï¼‰

#### 3.7.6 å®¡è®¡æ—¥å¿— âœ…

| æ—¥å¿—å­—æ®µ      | æè¿°                         |
| ------------- | ---------------------------- |
| user_id       | æ‰§è¡Œç”¨æˆ·ID                   |
| action        | æ“ä½œç±»å‹ï¼ˆåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ï¼‰ |
| module        | æ¨¡å—åç§°ï¼ˆæ•™æã€ç”¨æˆ·ç­‰ï¼‰     |
| resource_type | èµ„æºç±»å‹                     |
| resource_id   | èµ„æºID                       |
| old_value     | æ—§å€¼ï¼ˆJSONï¼‰                 |
| new_value     | æ–°å€¼ï¼ˆJSONï¼‰                 |
| ip_address    | å®¢æˆ·ç«¯IP                     |
| user_agent    | å®¢æˆ·ç«¯ç”¨æˆ·ä»£ç†               |
| created_at    | æ—¶é—´æˆ³                       |

---

## 4. æŠ€æœ¯æ¶æ„

### 4.1 ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å®¢æˆ·ç«¯å±‚                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Webæµè§ˆå™¨ï¼ˆChromeã€Safariã€Firefoxã€Edgeï¼‰                  â”‚
â”‚  - React 19 ç»„ä»¶                                             â”‚
â”‚  - Howler.js éŸ³é¢‘æ’­æ”¾å™¨                                      â”‚
â”‚  - TanStack Queryï¼ˆæ•°æ®è·å–ï¼‰                                â”‚
â”‚  - Zustandï¼ˆUIçŠ¶æ€ï¼‰                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ HTTPS
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨å±‚                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Next.js 16ï¼ˆVercelï¼‰                                       â”‚
â”‚  - App Router                                               â”‚
â”‚  - æœåŠ¡ç«¯ç»„ä»¶                                                â”‚
â”‚  - APIè·¯ç”±ï¼ˆ/api/v1/*ï¼‰                                     â”‚
â”‚  - æœåŠ¡ç«¯æ“ä½œ                                                â”‚
â”‚  - ä¸­é—´ä»¶ï¼ˆAuthã€CSRFï¼‰                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ REST API
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åç«¯å±‚                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Supabase äº‘æœåŠ¡                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  PostgreSQL æ•°æ®åº“                                   â”‚   â”‚
â”‚  â”‚  - ç”¨æˆ·æ•°æ®ã€å†…å®¹å…ƒæ•°æ®ã€å­¦ä¹ ç»Ÿè®¡                     â”‚   â”‚
â”‚  â”‚  - è¡Œçº§å®‰å…¨ï¼ˆRLSï¼‰                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Supabase Auth                                       â”‚   â”‚
â”‚  â”‚  - é‚®ç®±/å¯†ç ã€å¾®ä¿¡OAuth                              â”‚   â”‚
â”‚  â”‚  - JWTä»¤ç‰Œã€ä¼šè¯ç®¡ç†                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Supabase Storage                                    â”‚   â”‚
â”‚  â”‚  - éŸ³é¢‘æ–‡ä»¶ï¼ˆMP3ï¼‰ã€å›¾ç‰‡ã€äºŒç»´ç                      â”‚   â”‚
â”‚  â”‚  - CDNåŠ é€Ÿ                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 é¡¹ç›®ç»“æ„

```
book-voice-repo/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ (auth)/            # è®¤è¯è·¯ç”±ç»„ï¼ˆç™»å½•ã€æ³¨å†Œã€å¿˜è®°å¯†ç ï¼‰
â”‚   â”‚   â”œâ”€â”€ (main)/            # ä¸»åº”ç”¨è·¯ç”±ç»„
â”‚   â”‚   â”œâ”€â”€ (marketing)/       # è¥é”€é¡µé¢ï¼ˆè½åœ°é¡µï¼‰
â”‚   â”‚   â”œâ”€â”€ admin/             # ç®¡ç†ä»ªè¡¨æ¿è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ textbooks/     # æ•™æç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ users/         # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ media/         # åª’ä½“åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ analytics/     # åˆ†æä»ªè¡¨æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ logs/          # å®¡è®¡æ—¥å¿—
â”‚   â”‚   â”‚   â””â”€â”€ settings/      # ç³»ç»Ÿè®¾ç½®
â”‚   â”‚   â””â”€â”€ api/v1/            # RESTful APIè·¯ç”±
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/                # Shadcn/uiç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ admin/             # ç®¡ç†ä¸“ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ analytics/         # åˆ†æç»„ä»¶
â”‚   â”‚   â””â”€â”€ providers/         # ä¸Šä¸‹æ–‡æä¾›è€…
â”‚   â”œâ”€â”€ features/              # åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ auth/              # è®¤è¯
â”‚   â”‚   â”œâ”€â”€ player/            # éŸ³é¢‘æ’­æ”¾å™¨
â”‚   â”‚   â”œâ”€â”€ textbooks/         # æ•™æç®¡ç†
â”‚   â”‚   â”œâ”€â”€ lessons/           # è¯¾ç¨‹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ user/              # ç”¨æˆ·åŠŸèƒ½
â”‚   â”‚   â””â”€â”€ analytics/         # å­¦ä¹ åˆ†æ
â”‚   â”œâ”€â”€ services/              # åç«¯æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ auth.service.ts    # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ textbook.service.ts # æ•™ææœåŠ¡
â”‚   â”‚   â”œâ”€â”€ unit.service.ts    # å•å…ƒæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ lesson.service.ts  # è¯¾ç¨‹æœåŠ¡
â”‚   â”‚   â””â”€â”€ user.service.ts    # ç”¨æˆ·æœåŠ¡
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ supabase/          # Supabaseå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ api/               # APIå®¢æˆ·ç«¯å’Œè¾…åŠ©å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶å·¥å…·
â”‚   â”‚   â”œâ”€â”€ utils/             # è¾…åŠ©å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ hooks/             # è‡ªå®šä¹‰React Hooks
â”‚   â”‚   â””â”€â”€ validations/       # Zodæ¨¡å¼
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ database.ts        # Supabaseæ•°æ®åº“ç±»å‹
â”‚   â”‚   â”œâ”€â”€ api.ts             # APIç±»å‹
â”‚   â”‚   â””â”€â”€ index.ts           # å…±äº«ç±»å‹
â”‚   â””â”€â”€ styles/                # å…¨å±€æ ·å¼
â”œâ”€â”€ public/                    # é™æ€æ–‡ä»¶
â”œâ”€â”€ docs/                      # æ–‡æ¡£
â””â”€â”€ tests/                     # æµ‹è¯•ï¼ˆæœªæ¥ï¼‰
```

### 4.3 å…³é”®ä¾èµ–

**æ ¸å¿ƒï¼š**

- next: ^16.1.1
- react: ^19.0.0
- typescript: ^5.0.0

**çŠ¶æ€ä¸æ•°æ®ï¼š**

- @tanstack/react-query: ^5.x
- zustand: ^4.x
- react-hook-form: ^7.x
- zod: ^3.x

**Supabaseï¼š**

- @supabase/supabase-js: ^2.x
- @supabase/ssr: ^0.x

**UIï¼š**

- tailwindcss: ^3.4.x
- @radix-ui/\*: å„ç§RadixåŸè¯­
- lucide-react: å›¾æ ‡
- class-variance-authority: ç»„ä»¶å˜ä½“

**éŸ³é¢‘ä¸äºŒç»´ç ï¼š**

- howler: ^2.x
- qrcode.react: ^3.x
- jspdf: ^2.x

### 4.4 é”™è¯¯å¤„ç†ä¸æ—¥å¿—

**æ—¥å¿—ç­–ç•¥ï¼ˆæ··åˆæ–¹æ³•ï¼‰ï¼š**

- **å…³é”®é”™è¯¯ï¼š** Sentryç”¨äºé”™è¯¯è·Ÿè¸ªå’Œå‘Šè­¦
- **é€šç”¨æ—¥å¿—ï¼š** å­˜å‚¨åœ¨æ•°æ®åº“çš„ `error_logs` è¡¨ä¸­ä¾›ç®¡ç†å‘˜æŸ¥çœ‹
- **å¼€å‘ç¯å¢ƒï¼š** æ§åˆ¶å°è¾“å‡ºç”¨äºè°ƒè¯•

**æ—¥å¿—çº§åˆ«ï¼š**

- `error`: éœ€è¦ç«‹å³å…³æ³¨çš„å…³é”®æ•…éšœ
- `warn`: ä¸å½±å“åŠŸèƒ½çš„æ½œåœ¨é—®é¢˜
- `info`: ä¸€èˆ¬æ“ä½œä¿¡æ¯
- `debug`: è¯¦ç»†è°ƒè¯•ä¿¡æ¯ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰

**é”™è¯¯è·Ÿè¸ªå®ç°ï¼š**

```typescript
// Sentryé…ç½®ç”¨äºå…³é”®é”™è¯¯
Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  environment: process.env.NODE_ENV,
  tracesSampleRate: 0.1,
  beforeSend(event) {
    // è¿‡æ»¤æ•æ„Ÿæ•°æ®
    return event;
  },
});

// æ•°æ®åº“æ—¥å¿—è®°å½•ä¸€èˆ¬é”™è¯¯
await supabase.from("error_logs").insert({
  level: "error",
  message: error.message,
  stack: error.stack,
  context: { userId, action },
  created_at: new Date(),
});
```

### 4.5 æ€§èƒ½ç›‘æ§

**ç”¨æˆ·è¡Œä¸ºåˆ†æï¼š**

- è·Ÿè¸ªç”¨æˆ·è·¯å¾„å’ŒåŠŸèƒ½ä½¿ç”¨é¢‘ç‡
- ç›‘æ§ä¼šè¯æ—¶é•¿å’Œè·³å‡ºç‡
- åˆ†æè½¬åŒ–æ¼æ–—ï¼ˆæ³¨å†Œã€é¦–æ¬¡æ’­æ”¾ç­‰ï¼‰
- é›†æˆï¼šGoogle Analyticsæˆ–Mixpanel

**å…³é”®æŒ‡æ ‡ï¼š**

- ç”¨æˆ·å‚ä¸åº¦ï¼šæ—¥æ´»/æœˆæ´»ç”¨æˆ·
- åŠŸèƒ½é‡‡ç”¨ï¼šæœ€å¸¸ä½¿ç”¨çš„åŠŸèƒ½ã€æœªä½¿ç”¨çš„åŠŸèƒ½
- ç”¨æˆ·ç•™å­˜ï¼šç¬¬1å¤©ã€ç¬¬7å¤©ã€ç¬¬30å¤©ç•™å­˜ç‡
- ä¼šè¯è´¨é‡ï¼šå¹³å‡ä¼šè¯æ—¶é•¿ã€æ¯ä¼šè¯é¡µé¢æ•°

### 4.6 ç¼“å­˜æ¶æ„

**å®¢æˆ·ç«¯ç¼“å­˜ï¼š**

- TanStack Queryé…ç½® `staleTime` å’Œ `cacheTime`
- æ•™æåˆ—è¡¨ï¼š5åˆ†é’Ÿè¿‡æœŸæ—¶é—´
- è¯¾ç¨‹æ•°æ®ï¼š10åˆ†é’Ÿè¿‡æœŸæ—¶é—´
- ç”¨æˆ·ç»Ÿè®¡ï¼š1åˆ†é’Ÿè¿‡æœŸæ—¶é—´

**æœåŠ¡ç«¯ç¼“å­˜ï¼ˆRedisï¼‰ï¼š**

- çƒ­é—¨å†…å®¹ï¼šçƒ­é—¨æ•™æå’Œè¯¾ç¨‹
- ç”¨æˆ·ä¼šè¯ï¼šJWTä»¤ç‰ŒéªŒè¯ç¼“å­˜
- APIå“åº”ï¼šé¢‘ç¹è®¿é—®çš„ç«¯ç‚¹
- ç¼“å­˜å¤±æ•ˆï¼šå†…å®¹æ›´æ–°æ—¶

**Redisé…ç½®ï¼š**

```typescript
// ç¼“å­˜çƒ­é—¨å†…å®¹
await redis.setex(`textbook:${id}`, 3600, JSON.stringify(textbook));

// ç¼“å­˜ç”¨æˆ·ä¼šè¯
await redis.setex(`session:${userId}`, 7200, sessionData);

// ç¼“å­˜APIå“åº”
await redis.setex(`api:${endpoint}:${params}`, 300, response);
```

**ç¼“å­˜ç­–ç•¥ï¼š**

- å†™é€ï¼šæ•°æ®ä¿®æ”¹æ—¶æ›´æ–°ç¼“å­˜
- åŸºäºTTLçš„è¿‡æœŸï¼šè‡ªåŠ¨æ¸…ç†
- LRUé©±é€ï¼šå†…å­˜é™åˆ¶è¾¾åˆ°æ—¶

### 4.7 æ–‡ä»¶å­˜å‚¨ç­–ç•¥

**æ··åˆå­˜å‚¨æ–¹æ³•ï¼š**

- **å°æ–‡ä»¶ï¼ˆ< 10MBï¼‰ï¼š** Supabase Storage
  - å›¾ç‰‡ï¼ˆå°é¢ã€å¤´åƒã€äºŒç»´ç ï¼‰
  - å­—å¹•æ–‡ä»¶
  - ç³»ç»Ÿèµ„æº
- **å¤§æ–‡ä»¶ï¼ˆ> 10MBï¼‰ï¼š** é˜¿é‡Œäº‘OSS
  - éŸ³é¢‘æ–‡ä»¶ï¼ˆMP3ã€M4Aã€WAVã€OGGï¼‰
  - æ‰¹é‡å¯¼å‡º
  - å¤‡ä»½å½’æ¡£

**å­˜å‚¨é…ç½®ï¼š**

```typescript
// Supabase Storageç”¨äºå°æ–‡ä»¶
const { data, error } = await supabase.storage.from("images").upload(`covers/${uuid}.jpg`, file);

// é˜¿é‡Œäº‘OSSç”¨äºéŸ³é¢‘æ–‡ä»¶
const result = await ossClient.put(`audio/${uuid}.mp3`, file, {
  headers: {
    "Cache-Control": "public, max-age=31536000",
  },
});
```

**CDNé…ç½®ï¼š**

- é˜¿é‡Œäº‘CDNç”¨äºéŸ³é¢‘æ–‡ä»¶ï¼ˆå›½å†…ç”¨æˆ·ï¼‰
- Supabase CDNç”¨äºå›¾ç‰‡å’Œé™æ€èµ„æº
- ç¼“å­˜å¤´ï¼š1å¹´ç”¨äºä¸å¯å˜èµ„æº

### 4.8 éŸ³é¢‘å¤„ç†

**ä¸è½¬ç æ–¹æ³•ï¼š**

- æ¥å—å¤šç§æ ¼å¼ï¼šMP3ã€M4Aã€WAVã€OGG
- å®¢æˆ·ç«¯æ’­æ”¾é€šè¿‡Howler.jså¤„ç†æ ¼å¼å…¼å®¹æ€§
- æ— éœ€æœåŠ¡ç«¯è½¬æ¢
- å‡å°‘å¤„ç†å¼€é”€å’Œå­˜å‚¨æˆæœ¬

**æ–‡ä»¶éªŒè¯ï¼š**

- éªŒè¯æ–‡ä»¶æ‰©å±•åå’ŒMIMEç±»å‹
- æ£€æŸ¥éŸ³é¢‘æ—¶é•¿å’Œæ¯”ç‰¹ç‡
- éªŒè¯æ–‡ä»¶å¤§å°é™åˆ¶ï¼ˆæœ€å¤§100MBï¼‰
- æ‰«ææŸåçš„æ–‡ä»¶

### 4.9 å­—å¹•ç®¡ç†

**å­˜å‚¨æ ¼å¼ï¼š**

- åœ¨æ•°æ®åº“TEXTå­—æ®µä¸­å­˜å‚¨åŸå§‹SRT/VTTå†…å®¹
- ä¸Šä¼ æ—¶ä¸è§£ææˆ–è½¬æ¢
- æ’­æ”¾æ—¶åœ¨å®¢æˆ·ç«¯è§£æ
- ä¿ç•™åŸå§‹æ ¼å¼å’Œæ—¶é—´

**å­—å¹•æ¨¡å¼ï¼š**

```sql
ALTER TABLE lessons ADD COLUMN subtitle_text TEXT;
ALTER TABLE audios ADD COLUMN subtitle_text TEXT;
```

---

## 5. æ•°æ®åº“è®¾è®¡

### 5.1 å®ä½“å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   users     â”‚     â”‚  textbooks  â”‚     â”‚    units    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)     â”‚     â”‚ id (PK)     â”‚     â”‚ id (PK)     â”‚
â”‚ email       â”‚â—„â”€â”€â”€â”€â”‚ created_by  â”‚     â”‚ textbook_id â”‚â”€â”€â”€â–ºâ”‚
â”‚ username    â”‚     â”‚ name        â”‚â—„â”€â”€â”€â”€â”‚ name        â”‚
â”‚ role        â”‚     â”‚ grade       â”‚     â”‚ order_num   â”‚
â”‚ status      â”‚     â”‚ publisher   â”‚     â”‚ is_free     â”‚
â”‚ ...         â”‚     â”‚ ...         â”‚     â”‚ ...         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                       â”‚
      â”‚                                       â”‚
      â–¼                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  favorites  â”‚     â”‚   lessons   â”‚â—„â”€â”€â”€â”€â”‚   audios    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)     â”‚     â”‚ id (PK)     â”‚     â”‚ id (PK)     â”‚
â”‚ user_id     â”‚â”€â”€â”€â–ºâ—„â”‚ unit_id     â”‚     â”‚ lesson_id   â”‚
â”‚ lesson_id   â”‚     â”‚ name        â”‚     â”‚ title       â”‚
â”‚ created_at  â”‚     â”‚ audio_url   â”‚     â”‚ type        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ qr_code_tokenâ”‚     â”‚ audio_url   â”‚
                    â”‚ ...         â”‚     â”‚ ...         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                   â”‚                   â”‚
      â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚play_history â”‚     â”‚ play_logs   â”‚     â”‚learning_statsâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)     â”‚     â”‚ id (PK)     â”‚     â”‚ id (PK)     â”‚
â”‚ user_id     â”‚     â”‚ user_id     â”‚     â”‚ user_id     â”‚
â”‚ lesson_id   â”‚     â”‚ lesson_id   â”‚     â”‚ date        â”‚
â”‚ last_positionâ”‚     â”‚ duration    â”‚     â”‚ total_durationâ”‚
â”‚ play_count  â”‚     â”‚ speed       â”‚     â”‚ lessons_completedâ”‚
â”‚ ...         â”‚     â”‚ completed   â”‚     â”‚ ...         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 å®Œæ•´è¡¨å®šä¹‰

#### users

```sql
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  email TEXT UNIQUE,
  phone TEXT UNIQUE,
  username TEXT NOT NULL,
  avatar_url TEXT,
  grade TEXT,
  school TEXT,
  role TEXT NOT NULL DEFAULT 'student'
    CHECK (role IN ('student', 'admin', 'super_admin')),
  status TEXT NOT NULL DEFAULT 'active'
    CHECK (status IN ('active', 'suspended', 'banned')),
  last_login_at TIMESTAMPTZ,
  login_count INTEGER DEFAULT 0,
  wechat_openid TEXT,
  wechat_unionid TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_phone ON users(phone);
CREATE INDEX idx_users_role ON users(role);
CREATE INDEX idx_users_status ON users(status);
```

#### textbooks

```sql
CREATE TABLE textbooks (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  name TEXT NOT NULL,
  cover_url TEXT,
  grade TEXT NOT NULL,
  publisher TEXT NOT NULL,
  version TEXT NOT NULL,
  description TEXT,
  is_free BOOLEAN DEFAULT true,
  free_units_count INTEGER DEFAULT 0,
  created_by UUID REFERENCES users(id),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_textbooks_grade ON textbooks(grade);
CREATE INDEX idx_textbooks_created_by ON textbooks(created_by);
```

#### units

```sql
CREATE TABLE units (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  textbook_id UUID NOT NULL REFERENCES textbooks(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  order_num INTEGER NOT NULL,
  description TEXT,
  is_free BOOLEAN DEFAULT true,
  requires_vip BOOLEAN DEFAULT false,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(textbook_id, order_num)
);

CREATE INDEX idx_units_textbook_id ON units(textbook_id);
CREATE INDEX idx_units_order ON units(textbook_id, order_num);
```

#### lessons

```sql
CREATE TABLE lessons (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  unit_id UUID NOT NULL REFERENCES units(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  order_num INTEGER NOT NULL,
  audio_url TEXT NOT NULL,
  audio_duration INTEGER NOT NULL,
  subtitle_text JSONB,
  qr_code_token TEXT UNIQUE NOT NULL,
  qr_code_expires_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(unit_id, order_num)
);

CREATE INDEX idx_lessons_unit_id ON lessons(unit_id);
CREATE INDEX idx_lessons_order ON lessons(unit_id, order_num);
CREATE INDEX idx_lessons_qr_token ON lessons(qr_code_token);
```

#### audiosï¼ˆå¤šéŸ³é¢‘æ”¯æŒï¼‰

```sql
CREATE TABLE audios (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  lesson_id UUID NOT NULL REFERENCES lessons(id) ON DELETE CASCADE,
  title TEXT NOT NULL,
  type TEXT DEFAULT 'main' CHECK (type IN ('main', 'listening', 'practice')),
  audio_url TEXT NOT NULL,
  duration INTEGER,
  order_num INTEGER DEFAULT 0,
  is_default BOOLEAN DEFAULT false,
  subtitle_text JSONB,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_audios_lesson_id ON audios(lesson_id);
```

#### favorites

```sql
CREATE TABLE favorites (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  lesson_id UUID NOT NULL REFERENCES lessons(id) ON DELETE CASCADE,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, lesson_id)
);

CREATE INDEX idx_favorites_user_id ON favorites(user_id);
CREATE INDEX idx_favorites_lesson_id ON favorites(lesson_id);
```

#### play_history

```sql
CREATE TABLE play_history (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  lesson_id UUID NOT NULL REFERENCES lessons(id) ON DELETE CASCADE,
  last_position INTEGER DEFAULT 0,
  play_count INTEGER DEFAULT 0,
  total_duration INTEGER DEFAULT 0,
  last_played_at TIMESTAMPTZ DEFAULT NOW(),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, lesson_id)
);

CREATE INDEX idx_play_history_user_id ON play_history(user_id);
CREATE INDEX idx_play_history_lesson_id ON play_history(lesson_id);
CREATE INDEX idx_play_history_last_played ON play_history(user_id, last_played_at DESC);
```

#### learning_stats

```sql
CREATE TABLE learning_stats (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  date DATE NOT NULL,
  total_duration INTEGER DEFAULT 0,
  lessons_completed INTEGER DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(user_id, date)
);

CREATE INDEX idx_learning_stats_user_date ON learning_stats(user_id, date DESC);
```

#### play_logs

```sql
CREATE TABLE play_logs (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE SET NULL,
  lesson_id UUID NOT NULL REFERENCES lessons(id) ON DELETE CASCADE,
  duration INTEGER NOT NULL,
  speed REAL DEFAULT 1.0,
  completed BOOLEAN DEFAULT false,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_play_logs_user_id ON play_logs(user_id);
CREATE INDEX idx_play_logs_lesson_id ON play_logs(lesson_id);
CREATE INDEX idx_play_logs_created_at ON play_logs(created_at DESC);
```

#### user_statsï¼ˆèšåˆç»Ÿè®¡ï¼‰

```sql
CREATE TABLE user_stats (
  user_id UUID PRIMARY KEY REFERENCES users(id) ON DELETE CASCADE,
  total_learning_minutes INTEGER DEFAULT 0,
  total_lessons_completed INTEGER DEFAULT 0,
  total_audio_seconds INTEGER DEFAULT 0,
  streak_days INTEGER DEFAULT 0,
  last_activity_at TIMESTAMPTZ,
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### learning_records

```sql
CREATE TABLE learning_records (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  lesson_id UUID NOT NULL REFERENCES lessons(id) ON DELETE CASCADE,
  played_seconds INTEGER DEFAULT 0,
  completed BOOLEAN DEFAULT false,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_learning_records_user_id ON learning_records(user_id);
CREATE INDEX idx_learning_records_lesson_id ON learning_records(lesson_id);
```

#### operation_logsï¼ˆå®¡è®¡æ—¥å¿—ï¼‰

```sql
CREATE TABLE operation_logs (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE SET NULL,
  action TEXT NOT NULL,
  module TEXT NOT NULL,
  resource_type TEXT,
  resource_id TEXT,
  old_value JSONB,
  new_value JSONB,
  ip_address TEXT,
  user_agent TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_operation_logs_user_id ON operation_logs(user_id);
CREATE INDEX idx_operation_logs_module ON operation_logs(module);
CREATE INDEX idx_operation_logs_created_at ON operation_logs(created_at DESC);
```

#### subscriptionsï¼ˆå­¦æ ¡è®¢é˜…ï¼‰

```sql
CREATE TABLE subscriptions (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  school_name TEXT NOT NULL,
  school_contact TEXT,
  start_date DATE NOT NULL,
  end_date DATE NOT NULL,
  student_count INTEGER DEFAULT 0,
  status TEXT NOT NULL DEFAULT 'active'
    CHECK (status IN ('active', 'expired', 'suspended')),
  payment_status TEXT DEFAULT 'pending'
    CHECK (payment_status IN ('pending', 'paid', 'overdue')),
  notes TEXT,
  created_by UUID REFERENCES users(id),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_subscriptions_status ON subscriptions(status);
CREATE INDEX idx_subscriptions_end_date ON subscriptions(end_date);
```

#### classesï¼ˆç­çº§ç®¡ç†ï¼‰

```sql
CREATE TABLE classes (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  subscription_id UUID REFERENCES subscriptions(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  grade TEXT NOT NULL,
  admin_id UUID REFERENCES users(id),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_classes_subscription_id ON classes(subscription_id);
CREATE INDEX idx_classes_admin_id ON classes(admin_id);
```

#### class_studentsï¼ˆç­çº§-å­¦ç”Ÿå…³ç³»ï¼‰

```sql
CREATE TABLE class_students (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  class_id UUID NOT NULL REFERENCES classes(id) ON DELETE CASCADE,
  student_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  joined_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(class_id, student_id)
);

CREATE INDEX idx_class_students_class_id ON class_students(class_id);
CREATE INDEX idx_class_students_student_id ON class_students(student_id);
```

#### content_audit_logsï¼ˆå†…å®¹å®¡æ ¸æ—¥å¿—ï¼‰

```sql
CREATE TABLE content_audit_logs (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  content_type TEXT NOT NULL CHECK (content_type IN ('audio', 'subtitle', 'textbook')),
  content_id UUID NOT NULL,
  reviewer_id UUID REFERENCES users(id),
  status TEXT NOT NULL CHECK (status IN ('pending', 'approved', 'rejected')),
  ai_detection_result JSONB,
  manual_review_notes TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_content_audit_logs_content ON content_audit_logs(content_type, content_id);
CREATE INDEX idx_content_audit_logs_status ON content_audit_logs(status);
CREATE INDEX idx_content_audit_logs_reviewer ON content_audit_logs(reviewer_id);
```

---

## 6. APIè®¾è®¡

### 6.1 APIæ¶æ„

æ‰€æœ‰APIéµå¾ªRESTfulçº¦å®šå¹¶å¸¦æœ‰ç‰ˆæœ¬æ§åˆ¶ï¼š

- åŸºç¡€URLï¼š`/api/v1`
- è®¤è¯ï¼šBearer Tokenï¼ˆJWTï¼‰
- å“åº”æ ¼å¼ï¼šJSON
- é”™è¯¯å¤„ç†ï¼šæ ‡å‡†HTTPçŠ¶æ€ç 

### 6.2 è®¤è¯API

| æ–¹æ³• | ç«¯ç‚¹                    | æè¿°          |
| ---- | ----------------------- | ------------- |
| POST | `/api/v1/auth/register` | ç”¨æˆ·æ³¨å†Œ      |
| POST | `/api/v1/auth/login`    | ç”¨æˆ·ç™»å½•      |
| POST | `/api/v1/auth/logout`   | ç”¨æˆ·é€€å‡º      |
| POST | `/api/v1/auth/refresh`  | åˆ·æ–°è®¿é—®ä»¤ç‰Œ  |
| GET  | `/api/v1/auth/me`       | è·å–å½“å‰ç”¨æˆ·  |
| POST | `/api/v1/auth/wechat`   | å¾®ä¿¡OAuthç™»å½• |

**ç™»å½•è¯·æ±‚ï¼š**

```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

**ç™»å½•å“åº”ï¼š**

```json
{
  "success": true,
  "data": {
    "user": {
      "id": "uuid",
      "email": "user@example.com",
      "username": "username",
      "role": "student"
    },
    "tokens": {
      "accessToken": "jwt-token",
      "expiresIn": 3600
    }
  }
}
```

### 6.3 å†…å®¹API

| æ–¹æ³• | ç«¯ç‚¹                          | æè¿°                   |
| ---- | ----------------------------- | ---------------------- |
| GET  | `/api/v1/textbooks`           | åˆ—å‡ºæ•™æï¼ˆåˆ†é¡µï¼‰       |
| GET  | `/api/v1/textbooks/:id`       | è·å–æ•™æè¯¦æƒ…           |
| GET  | `/api/v1/textbooks/:id/units` | è·å–æ•™æå•å…ƒ           |
| GET  | `/api/v1/units/:id`           | è·å–å•å…ƒè¯¦æƒ…           |
| GET  | `/api/v1/units/:id/lessons`   | è·å–å•å…ƒè¯¾ç¨‹           |
| GET  | `/api/v1/lessons/:id`         | è·å–è¯¾ç¨‹è¯¦æƒ…           |
| GET  | `/api/v1/lessons/qr/:token`   | é€šè¿‡äºŒç»´ç ä»¤ç‰Œè·å–è¯¾ç¨‹ |

**æ•™æåˆ—è¡¨å“åº”ï¼š**

```json
{
  "success": true,
  "data": {
    "items": [...],
    "pagination": {
      "page": 1,
      "limit": 10,
      "total": 50,
      "totalPages": 5
    }
  }
}
```

### 6.4 ç”¨æˆ·æ•°æ®API

| æ–¹æ³•   | ç«¯ç‚¹                               | æè¿°         |
| ------ | ---------------------------------- | ------------ |
| GET    | `/api/v1/user/favorites`           | è·å–ç”¨æˆ·æ”¶è— |
| POST   | `/api/v1/user/favorites/:lessonId` | æ·»åŠ æ”¶è—     |
| DELETE | `/api/v1/user/favorites/:lessonId` | å–æ¶ˆæ”¶è—     |
| GET    | `/api/v1/user/history`             | è·å–æ’­æ”¾å†å² |
| PUT    | `/api/v1/user/history`             | æ›´æ–°æ’­æ”¾ä½ç½® |
| GET    | `/api/v1/user/stats`               | è·å–å­¦ä¹ ç»Ÿè®¡ |

### 6.5 ä¸Šä¼ API

| æ–¹æ³• | ç«¯ç‚¹                    | æè¿°         |
| ---- | ----------------------- | ------------ |
| POST | `/api/v1/upload/audio`  | ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶ |
| POST | `/api/v1/upload/images` | ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ |

**ä¸Šä¼ é™åˆ¶ï¼š**

- éŸ³é¢‘ï¼šMP3ã€M4Aã€WAVã€OGGï¼ˆæœ€å¤§100MBï¼‰
- å›¾ç‰‡ï¼šJPGã€PNGã€WebPï¼ˆæœ€å¤§10MBï¼‰

### 6.6 è®¢é˜…API

| æ–¹æ³•   | ç«¯ç‚¹                                       | æè¿°         |
| ------ | ------------------------------------------ | ------------ |
| GET    | `/api/v1/admin/subscriptions`              | åˆ—å‡ºæ‰€æœ‰è®¢é˜… |
| POST   | `/api/v1/admin/subscriptions`              | åˆ›å»ºæ–°è®¢é˜…   |
| GET    | `/api/v1/admin/subscriptions/:id`          | è·å–è®¢é˜…è¯¦æƒ… |
| PUT    | `/api/v1/admin/subscriptions/:id`          | æ›´æ–°è®¢é˜…     |
| DELETE | `/api/v1/admin/subscriptions/:id`          | åˆ é™¤è®¢é˜…     |
| POST   | `/api/v1/admin/subscriptions/:id/students` | æ‰¹é‡å¯¼å…¥å­¦ç”Ÿ |

### 6.7 ç­çº§ç®¡ç†API

| æ–¹æ³• | ç«¯ç‚¹                                 | æè¿°         |
| ---- | ------------------------------------ | ------------ |
| GET  | `/api/v1/admin/classes`              | åˆ—å‡ºæ‰€æœ‰ç­çº§ |
| POST | `/api/v1/admin/classes`              | åˆ›å»ºæ–°ç­çº§   |
| GET  | `/api/v1/admin/classes/:id`          | è·å–ç­çº§è¯¦æƒ… |
| GET  | `/api/v1/admin/classes/:id/students` | è·å–ç­çº§å­¦ç”Ÿ |
| GET  | `/api/v1/admin/classes/:id/reports`  | ç”Ÿæˆç­çº§æŠ¥å‘Š |

### 6.8 å†…å®¹å®¡æ ¸API

| æ–¹æ³• | ç«¯ç‚¹                                        | æè¿°           |
| ---- | ------------------------------------------- | -------------- |
| GET  | `/api/v1/admin/content-audit`               | åˆ—å‡ºå¾…å®¡æ ¸å†…å®¹ |
| POST | `/api/v1/admin/content-audit/:id/approve`   | æ‰¹å‡†å†…å®¹       |
| POST | `/api/v1/admin/content-audit/:id/reject`    | æ‹’ç»å†…å®¹       |
| GET  | `/api/v1/admin/content-audit/:id/ai-result` | è·å–AIæ£€æµ‹ç»“æœ |

### 6.6 é”™è¯¯å“åº”æ ¼å¼

```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid email format",
    "details": {...}
  }
}
```

---

## 7. UI/UXè®¾è®¡

### 7.1 è®¾è®¡ç³»ç»Ÿ

#### é¢œè‰²è°ƒè‰²æ¿

| é¢œè‰²   | åå…­è¿›åˆ¶ | ç”¨é€”                 |
| ------ | -------- | -------------------- |
| ä¸»è‰²   | #4A90E2  | ä¸»è¦æŒ‰é’®ã€é“¾æ¥ã€é«˜äº® |
| æ¬¡è¦è‰² | #F5A623  | å¼ºè°ƒå…ƒç´ ã€è­¦å‘Š       |
| æˆåŠŸè‰² | #7ED321  | æˆåŠŸçŠ¶æ€ã€å®Œæˆ       |
| è­¦å‘Šè‰² | #F8E71C  | è­¦å‘Šã€è°¨æ…           |
| ç ´åè‰² | #D0021B  | é”™è¯¯ã€åˆ é™¤æ“ä½œ       |
| èƒŒæ™¯è‰² | #FFFFFF  | ä¸»è¦èƒŒæ™¯             |
| å‰æ™¯è‰² | #1A1A1A  | æ–‡å­—ã€å›¾æ ‡           |

#### å­—ä½“æ’å°

- **æ ‡é¢˜ï¼š** åœ†è§’æ— è¡¬çº¿å­—ä½“ï¼Œç²—ä½“
- **æ­£æ–‡ï¼š** æ¸…æ™°æ˜“è¯»çš„æ— è¡¬çº¿å­—ä½“
- **å­—ä½“å¤§å°ï¼š** å¤§å°ºå¯¸ä»¥æé«˜å„¿ç«¥å¯è¯»æ€§

#### è®¾è®¡åŸåˆ™

- å¤§æŒ‰é’®ä¾¿äºè½»æ¾ç‚¹å‡»ï¼ˆæœ€å°44x44pxï¼‰
- æ¸…æ™°çš„è§†è§‰å±‚æ¬¡
- å……è¶³çš„ç•™ç™½
- åŸºäºå¡ç‰‡çš„è®¾è®¡
- åœ†è§’è¥é€ å‹å¥½å¤–è§‚
- é€‚åˆå„¿ç«¥çš„å›¾æ ‡

### 7.2 é¡µé¢å¸ƒå±€

#### é¦–é¡µ

- é¡¶éƒ¨å¯¼èˆªï¼ˆLogoã€æœç´¢ã€ç”¨æˆ·å¤´åƒï¼‰
- æ•™æç½‘æ ¼å¸ƒå±€
- æ¯å¼ å¡ç‰‡æ˜¾ç¤ºå°é¢ã€åç§°ã€å¹´çº§
- ç­›é€‰/æœç´¢åŠŸèƒ½

#### æ•™æè¯¦æƒ…é¡µ

- æ•™æä¿¡æ¯ï¼ˆå°é¢ã€åç§°ã€æè¿°ï¼‰
- å•å…ƒåˆ—è¡¨ï¼ˆæ‰‹é£ç´æˆ–å¡ç‰‡ï¼‰
- è¯¾ç¨‹åµŒå¥—åœ¨å•å…ƒä¸‹
- è¿›åº¦æŒ‡ç¤ºå™¨

#### æ’­æ”¾å™¨é¡µé¢

- é¡¶éƒ¨ï¼šè¯¾ç¨‹ä¿¡æ¯ï¼ˆåç§°ã€å•å…ƒï¼‰
- ä¸­å¿ƒï¼šæ’­æ”¾å™¨æ§åˆ¶
  - å¤§å‹æ’­æ”¾/æš‚åœæŒ‰é’®
  - è¿›åº¦æ¡
  - æ—¶é—´æ˜¾ç¤º
  - éŸ³é‡æ§åˆ¶
  - é€Ÿåº¦é€‰æ‹©å™¨
  - ABå¾ªç¯æŒ‰é’®
- åº•éƒ¨ï¼šå­—å¹•æ˜¾ç¤ºåŒºåŸŸ
- ä¾§è¾¹æ ï¼šæ’­æ”¾åˆ—è¡¨ï¼ˆå¯æŠ˜å ï¼‰

#### ä¸ªäººä¸­å¿ƒ

- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡
- å­¦ä¹ ç»Ÿè®¡å¡ç‰‡
- å¿«é€Ÿè®¿é—®æ”¶è—ã€å†å²
- è®¾ç½®å…¥å£

#### ç®¡ç†ä»ªè¡¨æ¿

- ä¾§è¾¹æ å¯¼èˆª
- ä¸»å†…å®¹åŒºåŸŸï¼ˆè¡¨æ ¼/è¡¨å•ï¼‰
- æ•°æ®å¯è§†åŒ–å›¾è¡¨
- æ“ä½œæŒ‰é’®

### 7.3 å“åº”å¼è®¾è®¡

| æ–­ç‚¹   | å®½åº¦           | å¸ƒå±€                       |
| ------ | -------------- | -------------------------- |
| ç§»åŠ¨ç«¯ | < 640px        | å•åˆ—ã€åº•éƒ¨å¯¼èˆªã€å…¨å±æ’­æ”¾å™¨ |
| å¹³æ¿   | 640px - 1024px | åŒåˆ—ã€ä¾§è¾¹æ å¯¼èˆª           |
| æ¡Œé¢ç«¯ | > 1024px       | å¤šåˆ—ã€å®Œæ•´åŠŸèƒ½             |

---

## 8. ä¸šåŠ¡è§„åˆ™

### 8.1 å†…å®¹è®¿é—®æ§åˆ¶

```
å¦‚æœç”¨æˆ·æœªç™»å½•ä¸”å†…å®¹å…è´¹ï¼š
    å…è®¸è®¿é—®ï¼Œä¸è·Ÿè¸ªæ•°æ®
å¦åˆ™å¦‚æœç”¨æˆ·æœªç™»å½•ä¸”å†…å®¹éœ€è¦ç™»å½•ï¼š
    é‡å®šå‘åˆ°ç™»å½•é¡µé¢
å¦åˆ™å¦‚æœç”¨æˆ·å·²ç™»å½•ï¼š
    å…è®¸è®¿é—®ï¼Œè·Ÿè¸ªå­¦ä¹ æ•°æ®
å¦åˆ™å¦‚æœå†…å®¹éœ€è¦VIPä¸”ç”¨æˆ·ä¸æ˜¯VIPï¼š
    æ˜¾ç¤ºå‡çº§æç¤º
```

### 8.2 å­¦ä¹ è¿›åº¦è®¡ç®—

**è¯¾ç¨‹å®Œæˆï¼š**

```
å®Œæˆç‡ = (æ’­æ”¾æ—¶é•¿ / éŸ³é¢‘æ—¶é•¿) * 100%

å¦‚æœå®Œæˆç‡ >= 80%ï¼š
    æ ‡è®°ä¸ºå·²å®Œæˆ
å¦åˆ™ï¼š
    æ ‡è®°ä¸ºè¿›è¡Œä¸­
```

**å­¦ä¹ æ—¶é•¿è·Ÿè¸ªï¼š**

- åªè®¡ç®—å®é™…æ’­æ”¾æ—¶é—´
- æš‚åœæ—¶é—´ä¸è®¡å…¥
- å¿«è¿›ä¸é‡å¤è®¡ç®—
- æ¯æ¬¡æ’­æ”¾ä¼šè¯åæ›´æ–°

**è¿ç»­å¤©æ•°è®¡ç®—ï¼š**

```
å¦‚æœä»Šå¤©æœ‰å­¦ä¹ è®°å½•ï¼ˆ>= 5åˆ†é’Ÿï¼‰ä¸”æ˜¨å¤©æœ‰è®°å½•ï¼š
    è¿ç»­å¤©æ•° += 1
å¦åˆ™å¦‚æœä»Šå¤©æœ‰è®°å½•ä¸”æ˜¨å¤©æ²¡æœ‰è®°å½•ï¼š
    è¿ç»­å¤©æ•° = 1
å¦åˆ™ï¼š
    è¿ç»­å¤©æ•°ä¸å˜ï¼ˆç›´åˆ°é‡ç½®ï¼‰
```

### 8.3 äºŒç»´ç è§„åˆ™

**ä»¤ç‰Œç”Ÿæˆï¼š**

- æ ¼å¼ï¼šUUID + æ—¶é—´æˆ³
- é•¿åº¦ï¼š12ä¸ªå­—ç¬¦ï¼ˆXXXXXX-XXXXXXï¼‰
- æ¯ä¸ªè¯¾ç¨‹å”¯ä¸€

**URLæ ¼å¼ï¼š**

```
https://domain.com/play?code={token}
```

**è¿‡æœŸå¤„ç†ï¼š**

- é»˜è®¤ï¼šæ°¸ä¸è¿‡æœŸ
- å¯é€‰ï¼šè‡ªå®šä¹‰è¿‡æœŸæ—¥æœŸ
- è¿‡æœŸä»£ç ï¼šæ˜¾ç¤ºæ¶ˆæ¯ï¼Œæä¾›é‡æ–°ç”Ÿæˆ

### 8.4 éŸ³é¢‘å¤„ç†

**æ”¯æŒçš„è¾“å…¥æ ¼å¼ï¼š**

- MP3ï¼ˆæ¨èï¼‰
- M4A/AAC
- WAV
- OGG

**æ ‡å‡†è¾“å‡ºï¼š**

- æ ¼å¼ï¼šMP3
- æ¯”ç‰¹ç‡ï¼š128kbps
- é‡‡æ ·ç‡ï¼š44.1kHz
- å£°é“ï¼šç«‹ä½“å£°

**æ–‡ä»¶é™åˆ¶ï¼š**

- å•ä¸ªæ–‡ä»¶ï¼šæœ€å¤§100MB
- æ‰¹é‡ä¸Šä¼ ï¼šæœ€å¤š20ä¸ªæ–‡ä»¶ï¼Œ500MBæ€»å¤§å°

---

## 9. å®æ–½çŠ¶æ€

### 9.1 å·²å®ŒæˆåŠŸèƒ½ âœ…

| ç±»åˆ«       | åŠŸèƒ½          | çŠ¶æ€    |
| ---------- | ------------- | ------- |
| **è®¤è¯**   | é‚®ç®±+å¯†ç ç™»å½• | âœ… å®Œæˆ |
| **è®¤è¯**   | å¾®ä¿¡OAuthç™»å½• | âœ… å®Œæˆ |
| **è®¤è¯**   | è®¿å®¢æ¨¡å¼      | âœ… å®Œæˆ |
| **è®¤è¯**   | å¯†ç é‡ç½®      | âœ… å®Œæˆ |
| **å†…å®¹**   | æ•™æCRUD      | âœ… å®Œæˆ |
| **å†…å®¹**   | å•å…ƒCRUD      | âœ… å®Œæˆ |
| **å†…å®¹**   | è¯¾ç¨‹CRUD      | âœ… å®Œæˆ |
| **å†…å®¹**   | å¤šéŸ³é¢‘æ”¯æŒ    | âœ… å®Œæˆ |
| **å†…å®¹**   | éŸ³é¢‘ä¸Šä¼       | âœ… å®Œæˆ |
| **å†…å®¹**   | å›¾ç‰‡ä¸Šä¼       | âœ… å®Œæˆ |
| **æ’­æ”¾å™¨** | åŸºæœ¬æ’­æ”¾      | âœ… å®Œæˆ |
| **æ’­æ”¾å™¨** | å¯å˜é€Ÿåº¦      | âœ… å®Œæˆ |
| **æ’­æ”¾å™¨** | ABå¾ªç¯        | âœ… å®Œæˆ |
| **æ’­æ”¾å™¨** | å­—å¹•æ˜¾ç¤º      | âœ… å®Œæˆ |
| **æ’­æ”¾å™¨** | ç»§ç»­æ’­æ”¾      | âœ… å®Œæˆ |
| **äºŒç»´ç ** | ç”Ÿæˆ          | âœ… å®Œæˆ |
| **äºŒç»´ç ** | æ‰«ææµç¨‹      | âœ… å®Œæˆ |
| **ç”¨æˆ·**   | æ”¶è—          | âœ… å®Œæˆ |
| **ç”¨æˆ·**   | æ’­æ”¾å†å²      | âœ… å®Œæˆ |
| **ç”¨æˆ·**   | å­¦ä¹ ç»Ÿè®¡      | âœ… å®Œæˆ |
| **ç®¡ç†å‘˜** | ä»ªè¡¨æ¿        | âœ… å®Œæˆ |
| **ç®¡ç†å‘˜** | ç”¨æˆ·ç®¡ç†      | âœ… å®Œæˆ |
| **ç®¡ç†å‘˜** | å†…å®¹ç®¡ç†      | âœ… å®Œæˆ |
| **ç®¡ç†å‘˜** | åª’ä½“åº“        | âœ… å®Œæˆ |
| **ç®¡ç†å‘˜** | åˆ†æ          | âœ… å®Œæˆ |
| **ç®¡ç†å‘˜** | å®¡è®¡æ—¥å¿—      | âœ… å®Œæˆ |
| **ç®¡ç†å‘˜** | è®¾ç½®          | âœ… å®Œæˆ |
| **API**    | RESTfulç«¯ç‚¹   | âœ… å®Œæˆ |
| **API**    | è®¤è¯          | âœ… å®Œæˆ |
| **API**    | åˆ†é¡µ          | âœ… å®Œæˆ |

### 9.2 è¿›è¡Œä¸­ ğŸ”„

| åŠŸèƒ½               | çŠ¶æ€      | å¤‡æ³¨               |
| ------------------ | --------- | ------------------ |
| æ‰‹æœº+çŸ­ä¿¡ç™»å½•      | ğŸ”„ è®¡åˆ’ä¸­ | éœ€è¦çŸ­ä¿¡æä¾›å•†é›†æˆ |
| å­¦ä¹ æŠ¥å‘Š           | ğŸ”„ è®¡åˆ’ä¸­ | æ¯å‘¨/æ¯æœˆæŠ¥å‘Š      |
| æŠ¥å‘Šåˆ†äº«           | ğŸ”„ è®¡åˆ’ä¸­ | å›¾åƒ/PDFå¯¼å‡º       |
| æ‰¹é‡äºŒç»´ç å¯¼å‡ºæ¨¡æ¿ | ğŸ”„ è®¡åˆ’ä¸­ | è‡ªå®šä¹‰å¸ƒå±€é€‰é¡¹     |

### 9.3 æœªæ¥è·¯çº¿å›¾ ğŸ“‹

| é˜¶æ®µ     | åŠŸèƒ½                                    |
| -------- | --------------------------------------- |
| ç¬¬äºŒé˜¶æ®µ | æ‰‹æœº+çŸ­ä¿¡ç™»å½•ã€å­¦ä¹ æŠ¥å‘Šã€æˆå°±ç³»ç»Ÿ       |
| ç¬¬ä¸‰é˜¶æ®µ | ç¦»çº¿æ’­æ”¾ï¼ˆPWAï¼‰ã€é«˜çº§åˆ†æã€ç¤¾äº¤åŠŸèƒ½     |
| ç¬¬å››é˜¶æ®µ | ç§»åŠ¨åŸç”Ÿåº”ç”¨ã€AIè¯­éŸ³è¯„ä¼°ã€å®¶é•¿/æ•™å¸ˆè§’è‰² |

---

## 10. éåŠŸèƒ½éœ€æ±‚

### 10.1 æ€§èƒ½éœ€æ±‚

| æŒ‡æ ‡           | ç›®æ ‡                           |
| -------------- | ------------------------------ |
| é¡µé¢åŠ è½½æ—¶é—´   | < 2ç§’                          |
| éŸ³é¢‘æ’­æ”¾å»¶è¿Ÿ   | < 500ms                        |
| å¹¶å‘ç”¨æˆ·       | 100+ï¼ˆMVPï¼‰ã€1000+ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ |
| æ•°æ®åº“æŸ¥è¯¢å“åº” | < 100ms                        |
| APIå“åº”æ—¶é—´    | < 200ms                        |
| Lighthouseåˆ†æ•° | > 90                           |

### 10.2 å¯ç”¨æ€§éœ€æ±‚

| æŒ‡æ ‡            | ç›®æ ‡     |
| --------------- | -------- |
| ç³»ç»Ÿå¯ç”¨æ€§      | > 99.5%  |
| å¤‡ä»½é¢‘ç‡        | æ¯æ—¥     |
| æ¢å¤æ—¶é—´ï¼ˆRTOï¼‰ | < 4å°æ—¶  |
| æ¢å¤ç‚¹ï¼ˆRPOï¼‰   | < 24å°æ—¶ |

### 10.3 å…¼å®¹æ€§éœ€æ±‚

**æµè§ˆå™¨ï¼š**

- Chrome 90+
- Safari 14+
- Firefox 88+
- Edge 90+

**ç§»åŠ¨è®¾å¤‡ï¼š**

- iOS 13+
- Android 8+

### 10.4 å¯æ‰©å±•æ€§

- æ”¯æŒæ°´å¹³æ‰©å±•
- æ¨¡å—åŒ–æ¶æ„
- CDNç”¨äºé™æ€èµ„æº
- æ•°æ®åº“è¿æ¥æ± 

---

## 11. å®‰å…¨æ¶æ„

### 11.1 è®¤è¯ä¸æˆæƒ

- **JWTä»¤ç‰Œï¼š** å¸¦è¿‡æœŸçš„è®¿é—®ä»¤ç‰Œ
- **åˆ·æ–°ä»¤ç‰Œï¼š** å®‰å…¨çš„ä»¤ç‰Œåˆ·æ–°æµç¨‹
- **ä¼šè¯ç®¡ç†ï¼š** httpOnly cookies
- **è¡Œçº§å®‰å…¨ï¼š** æ•°æ®åº“çº§è®¿é—®æ§åˆ¶
- **åŸºäºè§’è‰²çš„è®¿é—®ï¼š** studentã€adminã€super_admin

### 11.2 æ•°æ®ä¿æŠ¤

| æªæ–½     | å®ç°                       |
| -------- | -------------------------- |
| ä¼ è¾“     | å…¨é¢HTTPS                  |
| å¯†ç å­˜å‚¨ | bcryptå“ˆå¸Œï¼ˆé€šè¿‡Supabaseï¼‰ |
| APIå®‰å…¨  | CORSã€é€Ÿç‡é™åˆ¶             |
| è¾“å…¥éªŒè¯ | Zodæ¨¡å¼                    |
| SQLæ³¨å…¥  | å‚æ•°åŒ–æŸ¥è¯¢                 |
| XSSé¢„é˜²  | å†…å®¹æ¸…ç†                   |
| CSRFä¿æŠ¤ | SameSite cookies           |

### 11.3 é€Ÿç‡é™åˆ¶

**å®ç°ï¼šæ»‘åŠ¨çª—å£ç®—æ³•**

- ä½¿ç”¨Redisæˆ–å†…å­˜å­˜å‚¨è¿›è¡Œç²¾ç¡®é€Ÿç‡æ§åˆ¶
- åœ¨æ»‘åŠ¨æ—¶é—´çª—å£ä¸­è·Ÿè¸ªè¯·æ±‚æ—¶é—´æˆ³
- è‡ªåŠ¨è¿‡æœŸæ—§æ¡ç›®

**é€Ÿç‡é™åˆ¶ï¼š**

- é€šç”¨APIï¼šæ¯IPæ¯åˆ†é’Ÿ100ä¸ªè¯·æ±‚
- ç”¨æˆ·APIï¼šæ¯ç»è¿‡è®¤è¯ç”¨æˆ·æ¯å°æ—¶1000ä¸ªè¯·æ±‚
- è®¤è¯ç«¯ç‚¹ï¼šæ¯IPæ¯åˆ†é’Ÿ10ä¸ªè¯·æ±‚
- ä¸Šä¼ ç«¯ç‚¹ï¼šæ¯ç”¨æˆ·æ¯åˆ†é’Ÿ5ä¸ªè¯·æ±‚

**å®ç°ç¤ºä¾‹ï¼š**

```typescript
// æ»‘åŠ¨çª—å£é€Ÿç‡é™åˆ¶å™¨
async function checkRateLimit(key: string, limit: number, window: number) {
  const now = Date.now();
  const windowStart = now - window;

  // ç§»é™¤æ—§æ¡ç›®
  await redis.zremrangebyscore(key, 0, windowStart);

  // è®¡ç®—çª—å£ä¸­çš„è¯·æ±‚æ•°
  const count = await redis.zcard(key);

  if (count >= limit) {
    throw new Error("Rate limit exceeded");
  }

  // æ·»åŠ å½“å‰è¯·æ±‚
  await redis.zadd(key, now, `${now}-${Math.random()}`);
  await redis.expire(key, Math.ceil(window / 1000));
}
```

### 11.4 æ–‡ä»¶ä¸Šä¼ å®‰å…¨

**å®‰å…¨æªæ–½ï¼š**

- **æ–‡ä»¶ç±»å‹éªŒè¯ï¼š** éªŒè¯æ‰©å±•åå’ŒMIMEç±»å‹åŒ¹é…
- **æ–‡ä»¶åéšæœºåŒ–ï¼š** ä½¿ç”¨UUIDé˜²æ­¢è·¯å¾„éå†
- **å¤§å°é™åˆ¶ï¼š** éŸ³é¢‘100MBï¼Œå›¾ç‰‡æ¯ä¸ª10MB
- **é€Ÿç‡é™åˆ¶ï¼š** æ¯ç”¨æˆ·æ¯åˆ†é’Ÿ5æ¬¡ä¸Šä¼ 

**ä¸Šä¼ éªŒè¯ï¼š**

```typescript
// æ–‡ä»¶ä¸Šä¼ å®‰å…¨æ£€æŸ¥
function validateUpload(file: File) {
  // æ£€æŸ¥æ–‡ä»¶ç±»å‹
  const allowedTypes = ["audio/mpeg", "audio/mp4", "image/jpeg", "image/png"];
  if (!allowedTypes.includes(file.type)) {
    throw new Error("Invalid file type");
  }

  // æ£€æŸ¥æ–‡ä»¶å¤§å°
  const maxSize = file.type.startsWith("audio/") ? 100 * 1024 * 1024 : 10 * 1024 * 1024;
  if (file.size > maxSize) {
    throw new Error("File too large");
  }

  // ç”Ÿæˆéšæœºæ–‡ä»¶å
  const ext = file.name.split(".").pop();
  const filename = `${uuid()}.${ext}`;

  return filename;
}
```

### 11.5 å®‰å…¨å¢å¼º

**æ“ä½œç¡®è®¤ï¼š**

- æ•æ„Ÿæ“ä½œéœ€è¦ç¡®è®¤ï¼ˆåˆ é™¤å†…å®¹ã€ä¿®æ”¹å¯†ç ï¼‰
- æ˜¾ç¤ºæ“ä½œè¯¦æƒ…åå†ç¡®è®¤
- å¯¹é‡å¤å°è¯•å®æ–½å†·å´æœŸ

**ç™»å½•å¼‚å¸¸æ£€æµ‹ï¼š**

- è·Ÿè¸ªç™»å½•IPåœ°å€å’Œè®¾å¤‡ä¿¡æ¯
- æ£€æµ‹å¼‚å¸¸ç™»å½•æ¨¡å¼ï¼ˆæ–°ä½ç½®ã€æ–°è®¾å¤‡ï¼‰
- å¯¹å¯ç–‘æ´»åŠ¨å‘é€é‚®ä»¶å‘Šè­¦
- å¯é€‰ï¼šå¯¹å¼‚å¸¸ç™»å½•è¦æ±‚é¢å¤–éªŒè¯

**å®ç°ï¼š**

```typescript
// ç™»å½•å¼‚å¸¸æ£€æµ‹
async function detectLoginAnomaly(userId: string, ip: string, userAgent: string) {
  const recentLogins = await db.query(
    "SELECT ip_address, user_agent FROM login_history WHERE user_id = $1 ORDER BY created_at DESC LIMIT 10",
    [userId]
  );

  const isNewIP = !recentLogins.some((login) => login.ip_address === ip);
  const isNewDevice = !recentLogins.some((login) => login.user_agent === userAgent);

  if (isNewIP || isNewDevice) {
    // å‘é€å®‰å…¨å‘Šè­¦é‚®ä»¶
    await sendSecurityAlert(userId, { ip, userAgent, isNewIP, isNewDevice });
  }
}
```

---

## 12. éƒ¨ç½²ä¸è¿ç»´

### 12.1 éƒ¨ç½²æ¶æ„

**ç”Ÿäº§ç¯å¢ƒï¼šé˜¿é‡Œäº‘ECS**

- **åº”ç”¨æœåŠ¡å™¨ï¼š** é˜¿é‡Œäº‘ECSä¸Dockeréƒ¨ç½²
- **æ•°æ®åº“ï¼š** Supabase Cloudï¼ˆPostgreSQLï¼‰
- **æ–‡ä»¶å­˜å‚¨ï¼š** æ··åˆå­˜å‚¨ï¼ˆSupabase Storage + é˜¿é‡Œäº‘OSSï¼‰
- **CDNï¼š** é˜¿é‡Œäº‘CDNç”¨äºéŸ³é¢‘æ–‡ä»¶
- **åŸŸåï¼š** å›½å†…åŸŸåéœ€å¤‡æ¡ˆ
- **SSLï¼š** Let's Encrypté€šè¿‡Nginx

**éƒ¨ç½²å †æ ˆï¼š**

```yaml
# Docker Composeé…ç½®
services:
  app:
    image: book-voice:latest
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - NEXT_PUBLIC_SUPABASE_URL=${SUPABASE_URL}
      - NEXT_PUBLIC_SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
    restart: always

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis-data:/data
    restart: always

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    restart: always
```

**åŸºç¡€è®¾æ–½ï¼š**

- **ECSå®ä¾‹ï¼š** 4æ ¸CPUï¼Œ8GB RAMï¼ˆå¯æ‰©å±•ï¼‰
- **Redisï¼š** é˜¿é‡Œäº‘Rediså®ä¾‹ç”¨äºç¼“å­˜
- **è´Ÿè½½å‡è¡¡ï¼š** é˜¿é‡Œäº‘SLBå®ç°é«˜å¯ç”¨
- **ç›‘æ§ï¼š** é˜¿é‡Œäº‘CloudMonitor + Sentry

### 12.2 ç¯å¢ƒå˜é‡

```bash
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJxxx...
SUPABASE_SERVICE_ROLE_KEY=eyJxxx...

# App
NEXT_PUBLIC_APP_URL=https://yourdomain.com
NEXT_PUBLIC_APP_NAME=Book Voice

# Redis
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=xxx

# é˜¿é‡Œäº‘OSS
ALIYUN_OSS_ACCESS_KEY_ID=xxx
ALIYUN_OSS_ACCESS_KEY_SECRET=xxx
ALIYUN_OSS_BUCKET=book-voice-audio
ALIYUN_OSS_REGION=oss-cn-hangzhou
ALIYUN_CDN_DOMAIN=cdn.yourdomain.com

# é‚®ä»¶æœåŠ¡ï¼ˆSendGrid/Resendï¼‰
EMAIL_SERVICE_API_KEY=xxx
EMAIL_FROM=noreply@yourdomain.com

# ç›‘æ§
NEXT_PUBLIC_SENTRY_DSN=https://xxx@sentry.io/xxx
SENTRY_AUTH_TOKEN=xxx

# åˆ†æ
NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX
```

### 12.3 ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ

**é‚®ä»¶æœåŠ¡ï¼ˆSendGrid/Resendï¼‰ï¼š**

- å¯†ç é‡ç½®é‚®ä»¶
- è®¢é˜…åˆ°æœŸé€šçŸ¥
- å­¦ä¹ æŠ¥å‘Šå‘é€
- å®‰å…¨å‘Šè­¦

**é˜¿é‡Œäº‘OSSï¼š**

- éŸ³é¢‘æ–‡ä»¶å­˜å‚¨ï¼ˆ> 10MBï¼‰
- å¤‡ä»½å½’æ¡£
- å›½å†…ç”¨æˆ·CDNåŠ é€Ÿ

**AIæœåŠ¡ï¼ˆæœªæ¥ï¼‰ï¼š**

- è¯­éŸ³è¯†åˆ«ç”¨äºå­—å¹•ç”Ÿæˆ
- éŸ³é¢‘è´¨é‡æ£€æµ‹
- å‘éŸ³è¯„ä¼°

**é›†æˆç¤ºä¾‹ï¼š**

```typescript
// é‚®ä»¶æœåŠ¡é›†æˆ
import { Resend } from "resend";

const resend = new Resend(process.env.EMAIL_SERVICE_API_KEY);

async function sendSubscriptionExpiryNotice(email: string, daysLeft: number) {
  await resend.emails.send({
    from: process.env.EMAIL_FROM,
    to: email,
    subject: `è®¢é˜…å³å°†åˆ°æœŸæé†’ - å‰©ä½™${daysLeft}å¤©`,
    html: `<p>æ‚¨çš„è®¢é˜…å°†åœ¨${daysLeft}å¤©ååˆ°æœŸ...</p>`,
  });
}
```

### 12.4 CI/CDæµæ°´çº¿

- **Gitä»“åº“ï¼š** GitHub
- **åˆ†æ”¯ç­–ç•¥ï¼š** mainï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ã€feature/\*ï¼ˆåŠŸèƒ½ï¼‰
- **æäº¤çº¦å®šï¼š** çº¦å®šå¼æäº¤
- **é¢„æäº¤é’©å­ï¼š** Husky + lint-staged
- **éƒ¨ç½²ï¼š** é€šè¿‡GitHub Actionsæ‰‹åŠ¨éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ECS
- **é¢„è§ˆç¯å¢ƒï¼š** ç”¨äºæµ‹è¯•çš„é¢„å‘å¸ƒç¯å¢ƒ

**GitHub Actionså·¥ä½œæµç¨‹ï¼š**

```yaml
name: Deploy to Production

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: "18"
      - run: npm ci
      - run: npm run build
      - run: npm test
      - name: Deploy to ECS
        run: |
          ssh ${{ secrets.ECS_HOST }} "cd /app && git pull && docker-compose up -d --build"
```

### 12.5 å¤‡ä»½ç­–ç•¥

**Supabaseè‡ªåŠ¨å¤‡ä»½ï¼š**

- æ¯æ—¥å®Œæ•´å¤‡ä»½ï¼ˆä¿ç•™30å¤©ï¼‰
- æ”¯æŒæ—¶é—´ç‚¹æ¢å¤
- ä¸éœ€è¦é¢å¤–çš„å¤–éƒ¨å¤‡ä»½

**æ•°æ®ä¿ç•™ç­–ç•¥ï¼š**

- **æ“ä½œæ—¥å¿—ï¼š** ä¿ç•™90å¤©
- **é”™è¯¯æ—¥å¿—ï¼š** ä¿ç•™180å¤©
- **å­¦ä¹ æ•°æ®ï¼š** æ°¸ä¹…ä¿ç•™
- **æ’­æ”¾æ—¥å¿—ï¼š** æŒ‰æœˆåˆ†åŒºï¼Œ1å¹´åå½’æ¡£

### 12.6 æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–

**å¤åˆç´¢å¼•ï¼š**

```sql
-- é«˜é¢‘æŸ¥è¯¢ç´¢å¼•
CREATE INDEX idx_play_history_user_lesson ON play_history(user_id, lesson_id);
CREATE INDEX idx_learning_stats_user_date ON learning_stats(user_id, date DESC);
CREATE INDEX idx_play_logs_user_created ON play_logs(user_id, created_at DESC);
CREATE INDEX idx_favorites_user_created ON favorites(user_id, created_at DESC);
```

**è¡¨åˆ†åŒºï¼š**

```sql
-- æŒ‰æœˆåˆ†åŒºæ’­æ”¾æ—¥å¿—
CREATE TABLE play_logs (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id),
  lesson_id UUID NOT NULL REFERENCES lessons(id),
  duration INTEGER NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
) PARTITION BY RANGE (created_at);

-- åˆ›å»ºæœˆåº¦åˆ†åŒº
CREATE TABLE play_logs_2026_01 PARTITION OF play_logs
  FOR VALUES FROM ('2026-01-01') TO ('2026-02-01');

CREATE TABLE play_logs_2026_02 PARTITION OF play_logs
  FOR VALUES FROM ('2026-02-01') TO ('2026-03-01');
```

**æŸ¥è¯¢ä¼˜åŒ–ï¼š**

- ä½¿ç”¨EXPLAIN ANALYZEåˆ†ææ…¢æŸ¥è¯¢
- åœ¨Redisä¸­å®ç°æŸ¥è¯¢ç»“æœç¼“å­˜
- å¯¹å¤æ‚èšåˆä½¿ç”¨ç‰©åŒ–è§†å›¾

### 12.7 å‰ç«¯æ€§èƒ½ä¼˜åŒ–

**ä»£ç åˆ†å‰²ï¼š**

```typescript
// æ‡’åŠ è½½ç®¡ç†ä»ªè¡¨æ¿
const AdminDashboard = dynamic(() => import('@/features/admin/Dashboard'), {
  loading: () => <LoadingSpinner />,
  ssr: false
});

// æ‡’åŠ è½½éŸ³é¢‘æ’­æ”¾å™¨
const AudioPlayer = dynamic(() => import('@/features/player/AudioPlayer'), {
  loading: () => <PlayerSkeleton />
});
```

**å›¾ç‰‡ä¼˜åŒ–ï¼š**

```typescript
// ä½¿ç”¨next/imageè¿›è¡Œè‡ªåŠ¨ä¼˜åŒ–
import Image from 'next/image';

<Image
  src={textbook.cover_url}
  alt={textbook.name}
  width={300}
  height={400}
  quality={85}
  placeholder="blur"
  blurDataURL={textbook.blur_data_url}
/>
```

**å­—ä½“ä¼˜åŒ–ï¼š**

```typescript
// ä½¿ç”¨next/fontè¿›è¡Œä¼˜åŒ–çš„å­—ä½“åŠ è½½
import { Inter } from "next/font/google";

const inter = Inter({
  subsets: ["latin"],
  display: "swap",
  variable: "--font-inter",
});
```

**CSSä¼˜åŒ–ï¼š**

- å†…è”å…³é”®CSSåˆ°HTML
- å¼‚æ­¥åŠ è½½éå…³é”®CSS
- ç”Ÿäº§æ„å»ºæ—¶æ¸…é™¤Tailwind CSS

### 12.8 æµ‹è¯•ç­–ç•¥

**å•å…ƒæµ‹è¯•ï¼ˆJest + React Testing Libraryï¼‰ï¼š**

```typescript
// ç»„ä»¶æµ‹è¯•
describe('AudioPlayer', () => {
  it('should play audio when play button clicked', async () => {
    render(<AudioPlayer audioUrl="/test.mp3" />);
    const playButton = screen.getByRole('button', { name: /play/i });
    await userEvent.click(playButton);
    expect(mockHowler.play).toHaveBeenCalled();
  });
});

// æœåŠ¡æµ‹è¯•
describe('LessonService', () => {
  it('should fetch lesson by ID', async () => {
    const lesson = await lessonService.getById('lesson-id');
    expect(lesson).toBeDefined();
    expect(lesson.id).toBe('lesson-id');
  });
});
```

**æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡ï¼š**

- å…³é”®ä¸šåŠ¡é€»è¾‘ï¼š80%+è¦†ç›–ç‡
- UIç»„ä»¶ï¼š60%+è¦†ç›–ç‡
- å·¥å…·å‡½æ•°ï¼š90%+è¦†ç›–ç‡

---

## 13. é£é™©ä¸ç¼“è§£æªæ–½

### 13.1 æŠ€æœ¯é£é™©

| é£é™©         | å½±å“ | ç¼“è§£æªæ–½           |
| ------------ | ---- | ------------------ |
| éŸ³é¢‘è½¬ç æ€§èƒ½ | é«˜   | å®¢æˆ·ç«¯è½¬ç          |
| å¹¶å‘æ’­æ”¾å¸¦å®½ | é«˜   | CDNã€éŸ³é¢‘å‹ç¼©      |
| ç§»åŠ¨ç«¯å…¼å®¹æ€§ | ä¸­   | æ¸è¿›å¢å¼ºã€å…¨é¢æµ‹è¯• |
| æ•°æ®åº“æ€§èƒ½   | ä¸­   | é€‚å½“ç´¢å¼•ã€æŸ¥è¯¢ä¼˜åŒ– |

### 13.2 ä¸šåŠ¡é£é™©

| é£é™©         | å½±å“ | ç¼“è§£æªæ–½          |
| ------------ | ---- | ----------------- |
| ç‰ˆæƒé—®é¢˜     | é«˜   | æ˜ç¡®çš„è®¸å¯åè®®    |
| ç”¨æˆ·å¢é•¿ç¼“æ…¢ | ä¸­   | å­¦æ ¡åˆä½œã€è¥é”€    |
| å†…å®¹è´¨é‡     | ä¸­   | å†…å®¹å®¡æ ¸æµç¨‹      |
| å­˜å‚¨æˆæœ¬     | ä½   | éŸ³é¢‘å‹ç¼©ã€CDNä¼˜åŒ– |

### 13.3 å®‰å…¨é£é™©

| é£é™©     | å½±å“ | ç¼“è§£æªæ–½            |
| -------- | ---- | ------------------- |
| æ•°æ®æ³„éœ² | é«˜   | RLSã€åŠ å¯†ã€è®¿é—®æ§åˆ¶ |
| è´¦æˆ·åŠ«æŒ | é«˜   | å¼ºè®¤è¯ã€2FAï¼ˆæœªæ¥ï¼‰ |
| DDoSæ”»å‡» | ä¸­   | é€Ÿç‡é™åˆ¶ã€CDNä¿æŠ¤   |

---

## 14. æœªæ¥è·¯çº¿å›¾

### ç¬¬äºŒé˜¶æ®µï¼šå¢å¼ºåŠŸèƒ½

- æ‰‹æœº+çŸ­ä¿¡éªŒè¯ç™»å½•
- å­¦ä¹ æŠ¥å‘Šï¼ˆæ¯å‘¨/æ¯æœˆï¼‰
- æˆå°±/å¾½ç« ç³»ç»Ÿ
- æŠ¥å‘Šåˆ†äº«ï¼ˆå›¾åƒå¯¼å‡ºï¼‰
- é«˜çº§äºŒç»´ç æ¨¡æ¿

### ç¬¬ä¸‰é˜¶æ®µï¼šå¹³å°æ‰©å±•

- æ¸è¿›å¼Webåº”ç”¨ï¼ˆç¦»çº¿æ”¯æŒï¼‰
- é«˜çº§åˆ†æä»ªè¡¨æ¿
- A/Bæµ‹è¯•æ¡†æ¶
- ç¤¾äº¤åŠŸèƒ½ï¼ˆè¯„è®ºã€è®¨è®ºï¼‰
- æ¸¸æˆåŒ–ï¼ˆæ’è¡Œæ¦œï¼‰

### ç¬¬å››é˜¶æ®µï¼šåŸç”Ÿä¸AI

- ç§»åŠ¨åŸç”Ÿåº”ç”¨ï¼ˆReact Nativeï¼‰
- AIè¯­éŸ³è¯„ä¼°
- è¯­éŸ³è½¬æ–‡æœ¬ç”¨äºç»ƒä¹ 
- ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„
- å®¶é•¿/æ•™å¸ˆä»ªè¡¨æ¿

### ç¬¬äº”é˜¶æ®µï¼šä¼ä¸šçº§

- å¤šç§Ÿæˆ·æ”¯æŒ
- å­¦æ ¡/åŒºåŸŸç®¡ç†
- ç¬¬ä¸‰æ–¹é›†æˆAPI
- ç™½æ ‡è§£å†³æ–¹æ¡ˆ
- é«˜çº§æŠ¥å‘Š

---

## 15. é™„å½•

### 15.1 æœ¯è¯­è¡¨

| æœ¯è¯­     | å®šä¹‰                         |
| -------- | ---------------------------- |
| æ•™æ     | ç‰©ç†æ•™æçš„æ•°å­—ç‰ˆæœ¬           |
| å•å…ƒ     | æ•™æå†…çš„ç« èŠ‚                 |
| è¯¾ç¨‹     | å•å…ƒå†…çš„ç‰¹å®šå¬åŠ›å†…å®¹         |
| ABå¾ªç¯   | åœ¨ä¸¤ä¸ªæ ‡è®°ç‚¹ä¹‹é—´é‡å¤æ’­æ”¾     |
| ç»§ç»­æ’­æ”¾ | ä»ä¸Šæ¬¡åœæ­¢çš„ä½ç½®ç»§ç»­         |
| QRä»¤ç‰Œ   | ç”¨äºå¿«é€Ÿè¯¾ç¨‹è®¿é—®çš„å”¯ä¸€æ ‡è¯†ç¬¦ |
| RLS      | è¡Œçº§å®‰å…¨ï¼ˆæ•°æ®åº“è®¿é—®æ§åˆ¶ï¼‰   |

### 15.2 å‚è€ƒæ–‡æ¡£

- Next.jsæ–‡æ¡£ï¼šhttps://nextjs.org/docs
- Supabaseæ–‡æ¡£ï¼šhttps://supabase.com/docs
- Howler.jsæ–‡æ¡£ï¼šhttps://howlerjs.com
- Tailwind CSSæ–‡æ¡£ï¼šhttps://tailwindcss.com/docs
- Shadcn/uiæ–‡æ¡£ï¼šhttps://ui.shadcn.com

### 15.3 ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ       | å˜æ›´                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ---- | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 1.0  | 2026-01-15 | åˆå§‹PRDåˆ›å»º                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| 2.0  | 2026-01-18 | åŒ…å«å®æ–½çŠ¶æ€çš„å®Œæ•´æ›´æ–°                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 2.1  | 2026-01-18 | å•†ä¸šæ¨¡å¼å®Œå–„ï¼šæ·»åŠ å­¦æ ¡æ‰¹é‡è®¢é˜…æ¨¡å¼ã€æ‰¹é‡å­¦ç”Ÿå¯¼å…¥ã€è®¢é˜…ç®¡ç†ã€ç¦»çº¿ç¼“å­˜ç­–ç•¥ã€å†…å®¹å®¡æ ¸ç³»ç»Ÿã€ç­çº§ç®¡ç†ä»¥åŠæ–°æ•°æ®åº“è¡¨ï¼ˆsubscriptionsã€classesã€class_studentsã€content_audit_logsï¼‰                                                                                                                                                                                                                                                                                                                                                                           |
| 3.0  | 2026-01-18 | æŠ€æœ¯æ¶æ„æ·±å…¥æ¢è®¨ï¼šæ·»åŠ å…¨é¢çš„æŠ€æœ¯è§„èŒƒï¼ŒåŒ…æ‹¬é”™è¯¯å¤„ç†ï¼ˆSentry + æ•°æ®åº“æ—¥å¿—ï¼‰ã€æ€§èƒ½ç›‘æ§ï¼ˆç”¨æˆ·è¡Œä¸ºåˆ†æï¼‰ã€ç¼“å­˜æ¶æ„ï¼ˆå®¢æˆ·ç«¯ + Redisï¼‰ã€æ–‡ä»¶å­˜å‚¨ç­–ç•¥ï¼ˆæ··åˆSupabase + é˜¿é‡Œäº‘OSSï¼‰ã€éŸ³é¢‘å¤„ç†ï¼ˆä¸è½¬ç ï¼‰ã€å­—å¹•ç®¡ç†ï¼ˆåŸå§‹æ ¼å¼å­˜å‚¨ï¼‰ã€APIé€Ÿç‡é™åˆ¶ï¼ˆæ»‘åŠ¨çª—å£ç®—æ³•ï¼‰ã€æ–‡ä»¶ä¸Šä¼ å®‰å…¨ã€å®‰å…¨å¢å¼ºï¼ˆæ“ä½œç¡®è®¤ã€ç™»å½•å¼‚å¸¸æ£€æµ‹ï¼‰ã€éƒ¨ç½²æ¶æ„ï¼ˆé˜¿é‡Œäº‘ECSï¼‰ã€ç¬¬ä¸‰æ–¹é›†æˆï¼ˆé‚®ä»¶ã€OSSã€AIæœåŠ¡ï¼‰ã€æ•°æ®åº“ä¼˜åŒ–ï¼ˆå¤åˆç´¢å¼•ã€è¡¨åˆ†åŒºï¼‰ã€å‰ç«¯ä¼˜åŒ–ï¼ˆä»£ç åˆ†å‰²ã€å›¾ç‰‡/å­—ä½“ä¼˜åŒ–ï¼‰ã€æµ‹è¯•ç­–ç•¥ï¼ˆå•å…ƒæµ‹è¯•ï¼‰ã€è®¢é˜…è¿‡æœŸå¤„ç†ã€æ‰¹é‡å¯¼å…¥å¤„ç†ã€å­¦ä¹ æŠ¥å‘Šï¼ˆExcelå¯¼å‡ºï¼‰ã€ç¦»çº¿ç¼“å­˜ï¼ˆä»…HTTPï¼‰ä»¥åŠå†…å®¹å®¡æ ¸ï¼ˆä»…äººå·¥ï¼‰ |

---

**æ–‡æ¡£çŠ¶æ€ï¼š** ç”Ÿäº§å°±ç»ª
**æœ€åå®¡æ ¸ï¼š** 2026-01-18
**ä¸‹æ¬¡å®¡æ ¸ï¼š** ä¸»è¦åŠŸèƒ½å®Œæˆæ—¶
**ç»´æŠ¤è€…ï¼š** å¼€å‘å›¢é˜Ÿ
